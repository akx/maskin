!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(16).ignition()},function(t,e,n){var i;(function(t,r){(function(){function o(t,e){if(t!==e){var n=null===t,i=t===A,r=t===t,o=null===e,s=e===A,a=e===e;if(t>e&&!o||!r||n&&!s&&a||i&&a)return 1;if(e>t&&!n||!a||o&&!i&&r||s&&r)return-1}return 0}function s(t,e,n){for(var i=t.length,r=n?i:-1;n?r--:++r<i;)if(e(t[r],r,t))return r;return-1}function a(t,e,n){if(e!==e)return g(t,n);for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function u(t){return"function"==typeof t||!1}function l(t){return null==t?"":t+""}function c(t,e){for(var n=-1,i=t.length;++n<i&&e.indexOf(t.charAt(n))>-1;);return n}function h(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function p(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function f(t,e,n){for(var i=-1,r=t.criteria,s=e.criteria,a=r.length,u=n.length;++i<a;){var l=o(r[i],s[i]);if(l){if(i>=u)return l;var c=n[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function d(t){return Qt[t]}function y(t){return $t[t]}function _(t,e,n){return e?t=Jt[t]:n&&(t=Xt[t]),"\\"+t}function v(t){return"\\"+Xt[t]}function g(t,e,n){for(var i=t.length,r=e+(n?0:-1);n?r--:++r<i;){var o=t[r];if(o!==o)return r}return-1}function m(t){return!!t&&"object"==typeof t}function b(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function S(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;)t[n]===e&&(t[n]=Q,o[++r]=n);return o}function w(t,e){for(var n,i=-1,r=t.length,o=-1,s=[];++i<r;){var a=t[i],u=e?e(a,i,t):a;i&&n===u||(n=u,s[++o]=a)}return s}function x(t){for(var e=-1,n=t.length;++e<n&&b(t.charCodeAt(e)););return e}function T(t){for(var e=t.length;e--&&b(t.charCodeAt(e)););return e}function k(t){return Kt[t]}function M(t){function e(t){if(m(t)&&!Oa(t)&&!(t instanceof r)){if(t instanceof i)return t;if(es.call(t,"__chain__")&&es.call(t,"__wrapped__"))return fi(t)}return new i(t)}function n(){}function i(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Es,this.__views__=[]}function b(){var t=new r(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function Y(){if(this.__filtered__){var t=new r(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function it(){var t=this.__wrapped__.value(),e=this.__dir__,n=Oa(t),i=0>e,r=n?t.length:0,o=Qn(0,r,this.__views__),s=o.start,a=o.end,u=a-s,l=i?a:s-1,c=this.__iteratees__,h=c.length,p=0,f=xs(u,this.__takeCount__);if(!n||W>r||r==u&&f==u)return nn(i&&n?t.reverse():t,this.__actions__);var d=[];t:for(;u--&&f>p;){l+=e;for(var y=-1,_=t[l];++y<h;){var v=c[y],g=v.iteratee,m=v.type,b=g(_);if(m==U)_=b;else if(!b){if(m==V)continue t;break t}}d[p++]=_}return d}function ot(){this.__data__={}}function Qt(t){return this.has(t)&&delete this.__data__[t]}function $t(t){return"__proto__"==t?A:this.__data__[t]}function Kt(t){return"__proto__"!=t&&es.call(this.__data__,t)}function Zt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Jt(t){var e=t?t.length:0;for(this.data={hash:vs(null),set:new hs};e--;)this.push(t[e])}function Xt(t,e){var n=t.data,i="string"==typeof e||Cr(e)?n.set.has(e):n.hash[e];return i?0:-1}function Ht(t){var e=this.data;"string"==typeof t||Cr(t)?e.set.add(t):e.hash[t]=!0}function Yt(t,e){for(var n=-1,i=t.length,r=-1,o=e.length,s=Go(i+o);++n<i;)s[n]=t[n];for(;++r<o;)s[n++]=e[r];return s}function te(t,e){var n=-1,i=t.length;for(e||(e=Go(i));++n<i;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function ne(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,i=t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function se(t,e,n,i){for(var r=-1,o=t.length,s=i,a=s;++r<o;){var u=t[r],l=+e(u);n(l,s)&&(s=l,a=u)}return a}function ae(t,e){for(var n=-1,i=t.length,r=-1,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[++r]=s)}return o}function ue(t,e){for(var n=-1,i=t.length,r=Go(i);++n<i;)r[n]=e(t[n],n,t);return r}function le(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function ce(t,e,n,i){var r=-1,o=t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function he(t,e,n,i){var r=t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function pe(t,e){for(var n=-1,i=t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function fe(t,e){for(var n=t.length,i=0;n--;)i+=+e(t[n])||0;return i}function de(t,e){return t===A?e:t}function ye(t,e,n,i){return t!==A&&es.call(i,n)?t:e}function _e(t,e,n){for(var i=-1,r=Ia(e),o=r.length;++i<o;){var s=r[i],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(a!==A||s in t)||(t[s]=u)}return t}function ve(t,e){return null==e?t:me(e,Ia(e),t)}function ge(t,e){for(var n=-1,i=null==t,r=!i&&Xn(t),o=r?t.length:0,s=e.length,a=Go(s);++n<s;){var u=e[n];r?a[n]=Hn(u,o)?t[u]:A:a[n]=i?A:t[u]}return a}function me(t,e,n){n||(n={});for(var i=-1,r=e.length;++i<r;){var o=e[i];n[o]=t[o]}return n}function be(t,e,n){var i=typeof t;return"function"==i?e===A?t:sn(t,e,n):null==t?Eo:"object"==i?Be(t):e===A?Co(t):Ie(t,e)}function Se(t,e,n,i,r,o,s){var a;if(n&&(a=r?n(t,i,r):n(t)),a!==A)return a;if(!Cr(t))return t;var u=Oa(t);if(u){if(a=$n(t),!e)return te(t,a)}else{var l=is.call(t),c=l==H;if(l!=et&&l!=$&&(!c||r))return zt[l]?Zn(t,l,e):r?t:{};if(a=Kn(c?{}:t),!e)return ve(a,t)}o||(o=[]),s||(s=[]);for(var h=o.length;h--;)if(o[h]==t)return s[h];return o.push(t),s.push(a),(u?ee:Fe)(t,function(i,r){a[r]=Se(i,e,n,r,t,o,s)}),a}function we(t,e,n){if("function"!=typeof t)throw new Jo(z);return ps(function(){t.apply(A,n)},e)}function xe(t,e){var n=t?t.length:0,i=[];if(!n)return i;var r=-1,o=Vn(),s=o==a,u=s&&e.length>=W?yn(e):null,l=e.length;u&&(o=Xt,s=!1,e=u);t:for(;++r<n;){var c=t[r];if(s&&c===c){for(var h=l;h--;)if(e[h]===c)continue t;i.push(c)}else o(e,c,0)<0&&i.push(c)}return i}function Te(t,e){var n=!0;return js(t,function(t,i,r){return n=!!e(t,i,r)}),n}function ke(t,e,n,i){var r=i,o=r;return js(t,function(t,s,a){var u=+e(t,s,a);(n(u,r)||u===i&&u===o)&&(r=u,o=t)}),o}function Me(t,e,n,i){var r=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>r?0:r+n),i=i===A||i>r?r:+i||0,0>i&&(i+=r),r=n>i?0:i>>>0,n>>>=0;r>n;)t[n++]=e;return t}function Ae(t,e){var n=[];return js(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function Ee(t,e,n,i){var r;return n(t,function(t,n,o){return e(t,n,o)?(r=i?n:t,!1):void 0}),r}function Oe(t,e,n,i){i||(i=[]);for(var r=-1,o=t.length;++r<o;){var s=t[r];m(s)&&Xn(s)&&(n||Oa(s)||kr(s))?e?Oe(s,e,n,i):le(i,s):n||(i[i.length]=s)}return i}function qe(t,e){return Ls(t,e,to)}function Fe(t,e){return Ls(t,e,Ia)}function Re(t,e){return Bs(t,e,Ia)}function Pe(t,e){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var s=e[n];Pr(t[s])&&(o[++r]=s)}return o}function Ce(t,e,n){if(null!=t){n!==A&&n in hi(t)&&(e=[n]);for(var i=0,r=e.length;null!=t&&r>i;)t=t[e[i++]];return i&&i==r?t:A}}function Ne(t,e,n,i,r,o){return t===e?!0:null==t||null==e||!Cr(t)&&!m(e)?t!==t&&e!==e:je(t,e,Ne,n,i,r,o)}function je(t,e,n,i,r,o,s){var a=Oa(t),u=Oa(e),l=K,c=K;a||(l=is.call(t),l==$?l=et:l!=et&&(a=Vr(t))),u||(c=is.call(e),c==$?c=et:c!=et&&(u=Vr(e)));var h=l==et,p=c==et,f=l==c;if(f&&!a&&!h)return Bn(t,e,l);if(!r){var d=h&&es.call(t,"__wrapped__"),y=p&&es.call(e,"__wrapped__");if(d||y)return n(d?t.value():t,y?e.value():e,i,r,o,s)}if(!f)return!1;o||(o=[]),s||(s=[]);for(var _=o.length;_--;)if(o[_]==t)return s[_]==e;o.push(t),s.push(e);var v=(a?Ln:In)(t,e,n,i,r,o,s);return o.pop(),s.pop(),v}function De(t,e,n){var i=e.length,r=i,o=!n;if(null==t)return!r;for(t=hi(t);i--;){var s=e[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<r;){s=e[i];var a=s[0],u=t[a],l=s[1];if(o&&s[2]){if(u===A&&!(a in t))return!1}else{var c=n?n(u,l,a):A;if(!(c===A?Ne(l,u,n,!0):c))return!1}}return!0}function Le(t,e){var n=-1,i=Xn(t)?Go(t.length):[];return js(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function Be(t){var e=Un(t);if(1==e.length&&e[0][2]){var n=e[0][0],i=e[0][1];return function(t){return null==t?!1:t[n]===i&&(i!==A||n in hi(t))}}return function(t){return De(t,e)}}function Ie(t,e){var n=Oa(t),i=ti(t)&&ii(e),r=t+"";return t=pi(t),function(o){if(null==o)return!1;var s=r;if(o=hi(o),!(!n&&i||s in o)){if(o=1==t.length?o:Ce(o,Ke(t,0,-1)),null==o)return!1;s=Mi(t),o=hi(o)}return o[s]===e?e!==A||s in o:Ne(e,o[s],A,!0)}}function Ge(t,e,n,i,r){if(!Cr(t))return t;var o=Xn(e)&&(Oa(e)||Vr(e)),s=o?A:Ia(e);return ee(s||e,function(a,u){if(s&&(u=a,a=e[u]),m(a))i||(i=[]),r||(r=[]),We(t,e,u,Ge,n,i,r);else{var l=t[u],c=n?n(l,a,u,t,e):A,h=c===A;h&&(c=a),c===A&&(!o||u in t)||!h&&(c===c?c===l:l!==l)||(t[u]=c)}}),t}function We(t,e,n,i,r,o,s){for(var a=o.length,u=e[n];a--;)if(o[a]==u)return void(t[n]=s[a]);var l=t[n],c=r?r(l,u,n,t,e):A,h=c===A;h&&(c=u,Xn(u)&&(Oa(u)||Vr(u))?c=Oa(l)?l:Xn(l)?te(l):[]:Ir(u)||kr(u)?c=kr(l)?Kr(l):Ir(l)?l:{}:h=!1),o.push(u),s.push(c),h?t[n]=i(c,u,r,o,s):(c===c?c!==l:l===l)&&(t[n]=c)}function Ve(t){return function(e){return null==e?A:e[t]}}function Ue(t){var e=t+"";return t=pi(t),function(n){return Ce(n,t,e)}}function ze(t,e){for(var n=t?e.length:0;n--;){var i=e[n];if(i!=r&&Hn(i)){var r=i;fs.call(t,i,1)}}return t}function Qe(t,e){return t+gs(Ms()*(e-t+1))}function $e(t,e,n,i,r){return r(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function Ke(t,e,n){var i=-1,r=t.length;e=null==e?0:+e||0,0>e&&(e=-e>r?0:r+e),n=n===A||n>r?r:+n||0,0>n&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var o=Go(r);++i<r;)o[i]=t[i+e];return o}function Ze(t,e){var n;return js(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function Je(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Xe(t,e,n){var i=Gn(),r=-1;e=ue(e,function(t){return i(t)});var o=Le(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++r,value:t}});return Je(o,function(t,e){return f(t,e,n)})}function He(t,e){var n=0;return js(t,function(t,i,r){n+=+e(t,i,r)||0}),n}function Ye(t,e){var n=-1,i=Vn(),r=t.length,o=i==a,s=o&&r>=W,u=s?yn():null,l=[];u?(i=Xt,o=!1):(s=!1,u=e?[]:l);t:for(;++n<r;){var c=t[n],h=e?e(c,n,t):c;if(o&&c===c){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),l.push(c)}else i(u,h,0)<0&&((e||s)&&u.push(h),l.push(c))}return l}function tn(t,e){for(var n=-1,i=e.length,r=Go(i);++n<i;)r[n]=t[e[n]];return r}function en(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Ke(t,i?0:o,i?o+1:r):Ke(t,i?o+1:0,i?r:o)}function nn(t,e){var n=t;n instanceof r&&(n=n.value());for(var i=-1,o=e.length;++i<o;){var s=e[i];n=s.func.apply(s.thisArg,le([n],s.args))}return n}function rn(t,e,n){var i=0,r=t?t.length:i;if("number"==typeof e&&e===e&&Fs>=r){for(;r>i;){var o=i+r>>>1,s=t[o];(n?e>=s:e>s)&&null!==s?i=o+1:r=o}return r}return on(t,e,Eo,n)}function on(t,e,n,i){e=n(e);for(var r=0,o=t?t.length:0,s=e!==e,a=null===e,u=e===A;o>r;){var l=gs((r+o)/2),c=n(t[l]),h=c!==A,p=c===c;if(s)var f=p||i;else f=a?p&&h&&(i||null!=c):u?p&&(i||h):null==c?!1:i?e>=c:e>c;f?r=l+1:o=l}return xs(o,qs)}function sn(t,e,n){if("function"!=typeof t)return Eo;if(e===A)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)};case 5:return function(n,i,r,o,s){return t.call(e,n,i,r,o,s)}}return function(){return t.apply(e,arguments)}}function an(t){var e=new ss(t.byteLength),n=new ds(e);return n.set(new ds(t)),e}function un(t,e,n){for(var i=n.length,r=-1,o=ws(t.length-i,0),s=-1,a=e.length,u=Go(a+o);++s<a;)u[s]=e[s];for(;++r<i;)u[n[r]]=t[r];for(;o--;)u[s++]=t[r++];return u}function ln(t,e,n){for(var i=-1,r=n.length,o=-1,s=ws(t.length-r,0),a=-1,u=e.length,l=Go(s+u);++o<s;)l[o]=t[o];for(var c=o;++a<u;)l[c+a]=e[a];for(;++i<r;)l[c+n[i]]=t[o++];return l}function cn(t,e){return function(n,i,r){var o=e?e():{};if(i=Gn(i,r,3),Oa(n))for(var s=-1,a=n.length;++s<a;){var u=n[s];t(o,u,i(u,s,n),n)}else js(n,function(e,n,r){t(o,e,i(e,n,r),r)});return o}}function hn(t){return vr(function(e,n){var i=-1,r=null==e?0:n.length,o=r>2?n[r-2]:A,s=r>2?n[2]:A,a=r>1?n[r-1]:A;for("function"==typeof o?(o=sn(o,a,5),r-=2):(o="function"==typeof a?a:A,r-=o?1:0),s&&Yn(n[0],n[1],s)&&(o=3>r?A:o,r=1);++i<r;){var u=n[i];u&&t(e,u,o)}return e})}function pn(t,e){return function(n,i){var r=n?Ws(n):0;if(!ni(r))return t(n,i);for(var o=e?r:-1,s=hi(n);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return n}}function fn(t){return function(e,n,i){for(var r=hi(e),o=i(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(r[u],u,r)===!1)break}return e}}function dn(t,e){function n(){var r=this&&this!==ie&&this instanceof n?i:t;return r.apply(e,arguments)}var i=vn(t);return n}function yn(t){return vs&&hs?new Jt(t):null}function _n(t){return function(e){for(var n=-1,i=ko(co(e)),r=i.length,o="";++n<r;)o=t(o,i[n],n);return o}}function vn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ns(t.prototype),i=t.apply(n,e);return Cr(i)?i:n}}function gn(t){function e(n,i,r){r&&Yn(n,i,r)&&(i=A);var o=Dn(n,t,A,A,A,A,A,i);return o.placeholder=e.placeholder,o}return e}function mn(t,e){return vr(function(n){var i=n[0];return null==i?i:(n.push(e),t.apply(A,n))})}function bn(t,e){return function(n,i,r){if(r&&Yn(n,i,r)&&(i=A),i=Gn(i,r,3),1==i.length){n=Oa(n)?n:ci(n);var o=se(n,i,t,e);if(!n.length||o!==e)return o}return ke(n,i,t,e)}}function Sn(t,e){return function(n,i,r){if(i=Gn(i,r,3),Oa(n)){var o=s(n,i,e);return o>-1?n[o]:A}return Ee(n,i,t)}}function wn(t){return function(e,n,i){return e&&e.length?(n=Gn(n,i,3),s(e,n,t)):-1}}function xn(t){return function(e,n,i){return n=Gn(n,i,3),Ee(e,n,t,!0)}}function Tn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,o=0,s=Go(n);t?r--:++r<n;){var a=s[o++]=arguments[r];if("function"!=typeof a)throw new Jo(z);!e&&i.prototype.thru&&"wrapper"==Wn(a)&&(e=new i([],!0))}for(r=e?-1:n;++r<n;){a=s[r];var u=Wn(a),l="wrapper"==u?Gs(a):A;e=l&&ei(l[0])&&l[1]==(j|R|C|D)&&!l[4].length&&1==l[9]?e[Wn(l[0])].apply(e,l[3]):1==a.length&&ei(a)?e[u]():e.thru(a)}return function(){var t=arguments,i=t[0];if(e&&1==t.length&&Oa(i)&&i.length>=W)return e.plant(i).value();for(var r=0,o=n?s[r].apply(this,t):i;++r<n;)o=s[r].call(this,o);return o}}}function kn(t,e){return function(n,i,r){return"function"==typeof i&&r===A&&Oa(n)?t(n,i):e(n,sn(i,r,3))}}function Mn(t){return function(e,n,i){return("function"!=typeof n||i!==A)&&(n=sn(n,i,3)),t(e,n,to)}}function An(t){return function(e,n,i){return("function"!=typeof n||i!==A)&&(n=sn(n,i,3)),t(e,n)}}function En(t){return function(e,n,i){var r={};return n=Gn(n,i,3),Fe(e,function(e,i,o){var s=n(e,i,o);i=t?s:i,e=t?e:s,r[i]=e}),r}}function On(t){return function(e,n,i){return e=l(e),(t?e:"")+Pn(e,n,i)+(t?"":e)}}function qn(t){var e=vr(function(n,i){var r=S(i,e.placeholder);return Dn(n,t,A,i,r)});return e}function Fn(t,e){return function(n,i,r,o){var s=arguments.length<3;return"function"==typeof i&&o===A&&Oa(n)?t(n,i,r,s):$e(n,Gn(i,o,4),r,s,e)}}function Rn(t,e,n,i,r,o,s,a,u,l){function c(){for(var g=arguments.length,m=g,b=Go(g);m--;)b[m]=arguments[m];if(i&&(b=un(b,i,r)),o&&(b=ln(b,o,s)),d||_){var w=c.placeholder,x=S(b,w);if(g-=x.length,l>g){var T=a?te(a):A,k=ws(l-g,0),M=d?x:A,E=d?A:x,F=d?b:A,R=d?A:b;e|=d?C:N,e&=~(d?N:C),y||(e&=~(O|q));var P=[t,e,n,F,M,R,E,T,u,k],j=Rn.apply(A,P);return ei(t)&&Vs(j,P),j.placeholder=w,j}}var D=p?n:this,L=f?D[t]:t;return a&&(b=ui(b,a)),h&&u<b.length&&(b.length=u),this&&this!==ie&&this instanceof c&&(L=v||vn(t)),L.apply(D,b)}var h=e&j,p=e&O,f=e&q,d=e&R,y=e&F,_=e&P,v=f?A:vn(t);return c}function Pn(t,e,n){var i=t.length;if(e=+e,i>=e||!bs(e))return"";var r=e-i;return n=null==n?" ":n+"",vo(n,_s(r/n.length)).slice(0,r)}function Cn(t,e,n,i){function r(){for(var e=-1,a=arguments.length,u=-1,l=i.length,c=Go(l+a);++u<l;)c[u]=i[u];for(;a--;)c[u++]=arguments[++e];var h=this&&this!==ie&&this instanceof r?s:t;return h.apply(o?n:this,c)}var o=e&O,s=vn(t);return r}function Nn(t){var e=zo[t];return function(t,n){return n=n===A?0:+n||0,n?(n=ls(10,n),e(t*n)/n):e(t)}}function jn(t){return function(e,n,i,r){var o=Gn(i);return null==i&&o===be?rn(e,n,t):on(e,n,o(i,r,1),t)}}function Dn(t,e,n,i,r,o,s,a){var u=e&q;if(!u&&"function"!=typeof t)throw new Jo(z);var l=i?i.length:0;if(l||(e&=~(C|N),i=r=A),l-=r?r.length:0,e&N){var c=i,h=r;i=r=A}var p=u?A:Gs(t),f=[t,e,n,i,r,c,h,o,s,a];if(p&&(ri(f,p),e=f[1],a=f[9]),f[9]=null==a?u?0:t.length:ws(a-l,0)||0,e==O)var d=dn(f[0],f[2]);else d=e!=C&&e!=(O|C)||f[4].length?Rn.apply(A,f):Cn.apply(A,f);var y=p?Is:Vs;return y(d,f)}function Ln(t,e,n,i,r,o,s){var a=-1,u=t.length,l=e.length;if(u!=l&&!(r&&l>u))return!1;for(;++a<u;){var c=t[a],h=e[a],p=i?i(r?h:c,r?c:h,a):A;if(p!==A){if(p)continue;return!1}if(r){if(!pe(e,function(t){return c===t||n(c,t,i,r,o,s)}))return!1}else if(c!==h&&!n(c,h,i,r,o,s))return!1}return!0}function Bn(t,e,n){switch(n){case Z:case J:return+t==+e;case X:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case nt:case rt:return t==e+""}return!1}function In(t,e,n,i,r,o,s){var a=Ia(t),u=a.length,l=Ia(e),c=l.length;if(u!=c&&!r)return!1;for(var h=u;h--;){var p=a[h];if(!(r?p in e:es.call(e,p)))return!1}for(var f=r;++h<u;){p=a[h];var d=t[p],y=e[p],_=i?i(r?y:d,r?d:y,p):A;if(!(_===A?n(d,y,i,r,o,s):_))return!1;f||(f="constructor"==p)}if(!f){var v=t.constructor,g=e.constructor;if(v!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g))return!1}return!0}function Gn(t,n,i){var r=e.callback||Mo;return r=r===Mo?be:r,i?r(t,n,i):r}function Wn(t){for(var e=t.name,n=Cs[e],i=n?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Vn(t,n,i){var r=e.indexOf||Ti;return r=r===Ti?a:r,t?r(t,n,i):r}function Un(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=ii(e[n][1]);return e}function zn(t,e){var n=null==t?A:t[e];return Dr(n)?n:A}function Qn(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=xs(e,t+s);break;case"takeRight":t=ws(t,e-s)}}return{start:t,end:e}}function $n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&es.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Kn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=$o),new e}function Zn(t,e,n){var i=t.constructor;switch(e){case st:return an(t);case Z:case J:return new i(+t);case at:case ut:case lt:case ct:case ht:case pt:case ft:case dt:case yt:var r=t.buffer;return new i(n?an(r):r,t.byteOffset,t.length);case tt:case rt:return new i(t);case nt:var o=new i(t.source,Ct.exec(t));o.lastIndex=t.lastIndex}return o}function Jn(t,e,n){null==t||ti(e,t)||(e=pi(e),t=1==e.length?t:Ce(t,Ke(e,0,-1)),e=Mi(e));var i=null==t?t:t[e];return null==i?A:i.apply(t,n)}function Xn(t){return null!=t&&ni(Ws(t))}function Hn(t,e){return t="number"==typeof t||Dt.test(t)?+t:-1,e=null==e?Rs:e,t>-1&&t%1==0&&e>t}function Yn(t,e,n){if(!Cr(n))return!1;var i=typeof e;if("number"==i?Xn(n)&&Hn(e,n.length):"string"==i&&e in n){var r=n[e];return t===t?t===r:r!==r}return!1}function ti(t,e){var n=typeof t;if("string"==n&&At.test(t)||"number"==n)return!0;if(Oa(t))return!1;var i=!Mt.test(t);return i||null!=e&&t in hi(e)}function ei(t){var n=Wn(t);if(!(n in r.prototype))return!1;var i=e[n];if(t===i)return!0;var o=Gs(i);return!!o&&t===o[0]}function ni(t){return"number"==typeof t&&t>-1&&t%1==0&&Rs>=t}function ii(t){return t===t&&!Cr(t)}function ri(t,e){var n=t[1],i=e[1],r=n|i,o=j>r,s=i==j&&n==R||i==j&&n==D&&t[7].length<=e[8]||i==(j|D)&&n==R;if(!o&&!s)return t;i&O&&(t[2]=e[2],r|=n&O?0:F);var a=e[3];if(a){var u=t[3];t[3]=u?un(u,a,e[4]):te(a),t[4]=u?S(t[3],Q):te(e[4])}return a=e[5],a&&(u=t[5],t[5]=u?ln(u,a,e[6]):te(a),t[6]=u?S(t[5],Q):te(e[6])),a=e[7],a&&(t[7]=te(a)),i&j&&(t[8]=null==t[8]?e[8]:xs(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function oi(t,e){return t===A?e:qa(t,e,oi)}function si(t,e){t=hi(t);for(var n=-1,i=e.length,r={};++n<i;){var o=e[n];o in t&&(r[o]=t[o])}return r}function ai(t,e){var n={};return qe(t,function(t,i,r){e(t,i,r)&&(n[i]=t)}),n}function ui(t,e){for(var n=t.length,i=xs(e.length,n),r=te(t);i--;){var o=e[i];t[i]=Hn(o,n)?r[o]:A}return t}function li(t){for(var e=to(t),n=e.length,i=n&&t.length,r=!!i&&ni(i)&&(Oa(t)||kr(t)),o=-1,s=[];++o<n;){var a=e[o];(r&&Hn(a,i)||es.call(t,a))&&s.push(a)}return s}function ci(t){return null==t?[]:Xn(t)?Cr(t)?t:$o(t):oo(t)}function hi(t){return Cr(t)?t:$o(t)}function pi(t){if(Oa(t))return t;var e=[];return l(t).replace(Et,function(t,n,i,r){e.push(i?r.replace(Rt,"$1"):n||t)}),e}function fi(t){return t instanceof r?t.clone():new i(t.__wrapped__,t.__chain__,te(t.__actions__))}function di(t,e,n){e=(n?Yn(t,e,n):null==e)?1:ws(gs(e)||1,1);for(var i=0,r=t?t.length:0,o=-1,s=Go(_s(r/e));r>i;)s[++o]=Ke(t,i,i+=e);return s}function yi(t){for(var e=-1,n=t?t.length:0,i=-1,r=[];++e<n;){var o=t[e];o&&(r[++i]=o)}return r}function _i(t,e,n){var i=t?t.length:0;return i?((n?Yn(t,e,n):null==e)&&(e=1),Ke(t,0>e?0:e)):[]}function vi(t,e,n){var i=t?t.length:0;return i?((n?Yn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ke(t,0,0>e?0:e)):[]}function gi(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!0,!0):[]}function mi(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!0):[]}function bi(t,e,n,i){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Yn(t,e,n)&&(n=0,i=r),Me(t,e,n,i)):[]}function Si(t){return t?t[0]:A}function wi(t,e,n){var i=t?t.length:0;return n&&Yn(t,e,n)&&(e=!1),i?Oe(t,e):[]}function xi(t){var e=t?t.length:0;return e?Oe(t,!0):[]}function Ti(t,e,n){var i=t?t.length:0;if(!i)return-1;if("number"==typeof n)n=0>n?ws(i+n,0):n;else if(n){var r=rn(t,e);return i>r&&(e===e?e===t[r]:t[r]!==t[r])?r:-1}return a(t,e,n||0)}function ki(t){return vi(t,1)}function Mi(t){var e=t?t.length:0;return e?t[e-1]:A}function Ai(t,e,n){var i=t?t.length:0;if(!i)return-1;var r=i;if("number"==typeof n)r=(0>n?ws(i+n,0):xs(n||0,i-1))+1;else if(n){r=rn(t,e,!0)-1;var o=t[r];return(e===e?e===o:o!==o)?r:-1}if(e!==e)return g(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1}function Ei(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,i=Vn(),r=t.length;++n<r;)for(var o=0,s=t[n];(o=i(e,s,o))>-1;)fs.call(e,o,1);return e}function Oi(t,e,n){var i=[];if(!t||!t.length)return i;var r=-1,o=[],s=t.length;for(e=Gn(e,n,3);++r<s;){var a=t[r];e(a,r,t)&&(i.push(a),o.push(r))}return ze(t,o),i}function qi(t){return _i(t,1)}function Fi(t,e,n){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Yn(t,e,n)&&(e=0,n=i),Ke(t,e,n)):[]}function Ri(t,e,n){var i=t?t.length:0;return i?((n?Yn(t,e,n):null==e)&&(e=1),Ke(t,0,0>e?0:e)):[]}function Pi(t,e,n){var i=t?t.length:0;return i?((n?Yn(t,e,n):null==e)&&(e=1),e=i-(+e||0),Ke(t,0>e?0:e)):[]}function Ci(t,e,n){return t&&t.length?en(t,Gn(e,n,3),!1,!0):[]}function Ni(t,e,n){return t&&t.length?en(t,Gn(e,n,3)):[]}function ji(t,e,n,i){var r=t?t.length:0;if(!r)return[];null!=e&&"boolean"!=typeof e&&(i=n,n=Yn(t,e,i)?A:e,e=!1);var o=Gn();return(null!=n||o!==be)&&(n=o(n,i,3)),e&&Vn()==a?w(t,n):Ye(t,n)}function Di(t){if(!t||!t.length)return[];var e=-1,n=0;t=ae(t,function(t){return Xn(t)?(n=ws(t.length,n),!0):void 0});for(var i=Go(n);++e<n;)i[e]=ue(t,Ve(e));return i}function Li(t,e,n){var i=t?t.length:0;if(!i)return[];var r=Di(t);return null==e?r:(e=sn(e,n,4),ue(r,function(t){return ce(t,e,A,!0)}))}function Bi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Xn(n))var i=i?le(xe(i,n),xe(n,i)):n}return i?Ye(i):[]}function Ii(t,e){var n=-1,i=t?t.length:0,r={};for(!i||e||Oa(t[0])||(e=[]);++n<i;){var o=t[n];e?r[o]=e[n]:o&&(r[o[0]]=o[1])}return r}function Gi(t){var n=e(t);return n.__chain__=!0,n}function Wi(t,e,n){return e.call(n,t),t}function Vi(t,e,n){return e.call(n,t)}function Ui(){return Gi(this)}function zi(){return new i(this.value(),this.__chain__)}function Qi(t){for(var e,i=this;i instanceof n;){var r=fi(i);e?o.__wrapped__=r:e=r;var o=r;i=i.__wrapped__}return o.__wrapped__=t,e}function $i(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof r){var n=t;return this.__actions__.length&&(n=new r(this)),n=n.reverse(),n.__actions__.push({func:Vi,args:[e],thisArg:A}),new i(n,this.__chain__)}return this.thru(e)}function Ki(){return this.value()+""}function Zi(){return nn(this.__wrapped__,this.__actions__)}function Ji(t,e,n){var i=Oa(t)?oe:Te;return n&&Yn(t,e,n)&&(e=A),("function"!=typeof e||n!==A)&&(e=Gn(e,n,3)),i(t,e)}function Xi(t,e,n){var i=Oa(t)?ae:Ae;return e=Gn(e,n,3),i(t,e)}function Hi(t,e){return ra(t,Be(e))}function Yi(t,e,n,i){var r=t?Ws(t):0;return ni(r)||(t=oo(t),r=t.length),n="number"!=typeof n||i&&Yn(e,n,i)?0:0>n?ws(r+n,0):n||0,"string"==typeof t||!Oa(t)&&Wr(t)?r>=n&&t.indexOf(e,n)>-1:!!r&&Vn(t,e,n)>-1}function tr(t,e,n){var i=Oa(t)?ue:Le;return e=Gn(e,n,3),i(t,e)}function er(t,e){return tr(t,Co(e))}function nr(t,e,n){var i=Oa(t)?ae:Ae;return e=Gn(e,n,3),i(t,function(t,n,i){return!e(t,n,i)})}function ir(t,e,n){if(n?Yn(t,e,n):null==e){t=ci(t);var i=t.length;return i>0?t[Qe(0,i-1)]:A}var r=-1,o=$r(t),i=o.length,s=i-1;for(e=xs(0>e?0:+e||0,i);++r<e;){var a=Qe(r,s),u=o[a];o[a]=o[r],o[r]=u}return o.length=e,o}function rr(t){return ir(t,Es)}function or(t){var e=t?Ws(t):0;return ni(e)?e:Ia(t).length}function sr(t,e,n){var i=Oa(t)?pe:Ze;return n&&Yn(t,e,n)&&(e=A),("function"!=typeof e||n!==A)&&(e=Gn(e,n,3)),i(t,e)}function ar(t,e,n){if(null==t)return[];n&&Yn(t,e,n)&&(e=A);var i=-1;e=Gn(e,n,3);var r=Le(t,function(t,n,r){return{criteria:e(t,n,r),index:++i,value:t}});return Je(r,p)}function ur(t,e,n,i){return null==t?[]:(i&&Yn(e,n,i)&&(n=A),Oa(e)||(e=null==e?[]:[e]),Oa(n)||(n=null==n?[]:[n]),Xe(t,e,n))}function lr(t,e){return Xi(t,Be(e))}function cr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Jo(z);var n=t;t=e,e=n}return t=bs(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function hr(t,e,n){return n&&Yn(t,e,n)&&(e=A),e=t&&null==e?t.length:ws(+e||0,0),Dn(t,j,A,A,A,A,e)}function pr(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Jo(z);var i=t;t=e,e=i}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=A),n}}function fr(t,e,n){function i(){f&&as(f),l&&as(l),y=0,l=f=d=A}function r(e,n){n&&as(n),l=f=d=A,e&&(y=ya(),c=t.apply(p,u),f||l||(u=p=A))}function o(){var t=e-(ya()-h);0>=t||t>e?r(d,l):f=ps(o,t)}function s(){r(v,f)}function a(){if(u=arguments,h=ya(),p=this,d=v&&(f||!g),_===!1)var n=g&&!f;else{l||g||(y=h);var i=_-(h-y),r=0>=i||i>_;r?(l&&(l=as(l)),y=h,c=t.apply(p,u)):l||(l=ps(s,i))}return r&&f?f=as(f):f||e===_||(f=ps(o,e)),n&&(r=!0,c=t.apply(p,u)),!r||f||l||(u=p=A),c}var u,l,c,h,p,f,d,y=0,_=!1,v=!0;if("function"!=typeof t)throw new Jo(z);if(e=0>e?0:+e||0,n===!0){var g=!0;v=!1}else Cr(n)&&(g=!!n.leading,_="maxWait"in n&&ws(+n.maxWait||0,e),v="trailing"in n?!!n.trailing:v);return a.cancel=i,a}function dr(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Jo(z);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new dr.Cache,n}function yr(t){if("function"!=typeof t)throw new Jo(z);return function(){return!t.apply(this,arguments)}}function _r(t){return pr(2,t)}function vr(t,e){if("function"!=typeof t)throw new Jo(z);return e=ws(e===A?t.length-1:+e||0,0),function(){for(var n=arguments,i=-1,r=ws(n.length-e,0),o=Go(r);++i<r;)o[i]=n[e+i];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=Go(e+1);for(i=-1;++i<e;)s[i]=n[i];return s[e]=o,t.apply(this,s)}}function gr(t){if("function"!=typeof t)throw new Jo(z);return function(e){return t.apply(this,e)}}function mr(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Jo(z);return n===!1?i=!1:Cr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),fr(t,e,{leading:i,maxWait:+e,trailing:r})}function br(t,e){return e=null==e?Eo:e,Dn(e,C,A,[t],[])}function Sr(t,e,n,i){return e&&"boolean"!=typeof e&&Yn(t,e,n)?e=!1:"function"==typeof e&&(i=n,n=e,e=!1),"function"==typeof n?Se(t,e,sn(n,i,1)):Se(t,e)}function wr(t,e,n){return"function"==typeof e?Se(t,!0,sn(e,n,1)):Se(t,!0)}function xr(t,e){return t>e}function Tr(t,e){return t>=e}function kr(t){return m(t)&&Xn(t)&&es.call(t,"callee")&&!cs.call(t,"callee")}function Mr(t){return t===!0||t===!1||m(t)&&is.call(t)==Z}function Ar(t){return m(t)&&is.call(t)==J}function Er(t){return!!t&&1===t.nodeType&&m(t)&&!Ir(t)}function Or(t){return null==t?!0:Xn(t)&&(Oa(t)||Wr(t)||kr(t)||m(t)&&Pr(t.splice))?!t.length:!Ia(t).length}function qr(t,e,n,i){n="function"==typeof n?sn(n,i,3):A;var r=n?n(t,e):A;return r===A?Ne(t,e,n):!!r}function Fr(t){return m(t)&&"string"==typeof t.message&&is.call(t)==X}function Rr(t){return"number"==typeof t&&bs(t)}function Pr(t){return Cr(t)&&is.call(t)==H}function Cr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Nr(t,e,n,i){return n="function"==typeof n?sn(n,i,3):A,De(t,Un(e),n)}function jr(t){return Br(t)&&t!=+t}function Dr(t){return null==t?!1:Pr(t)?os.test(ts.call(t)):m(t)&&jt.test(t)}function Lr(t){return null===t}function Br(t){return"number"==typeof t||m(t)&&is.call(t)==tt}function Ir(t){var e;if(!m(t)||is.call(t)!=et||kr(t)||!es.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return qe(t,function(t,e){n=e}),n===A||es.call(t,n)}function Gr(t){return Cr(t)&&is.call(t)==nt}function Wr(t){return"string"==typeof t||m(t)&&is.call(t)==rt}function Vr(t){return m(t)&&ni(t.length)&&!!Ut[is.call(t)]}function Ur(t){return t===A}function zr(t,e){return e>t}function Qr(t,e){return e>=t}function $r(t){var e=t?Ws(t):0;return ni(e)?e?te(t):[]:oo(t)}function Kr(t){return me(t,to(t))}function Zr(t,e,n){var i=Ns(t);return n&&Yn(t,e,n)&&(e=A),e?ve(i,e):i}function Jr(t){return Pe(t,to(t))}function Xr(t,e,n){var i=null==t?A:Ce(t,pi(e),e+"");return i===A?n:i}function Hr(t,e){if(null==t)return!1;var n=es.call(t,e);if(!n&&!ti(e)){if(e=pi(e),t=1==e.length?t:Ce(t,Ke(e,0,-1)),null==t)return!1;e=Mi(e),n=es.call(t,e)}return n||ni(t.length)&&Hn(e,t.length)&&(Oa(t)||kr(t))}function Yr(t,e,n){n&&Yn(t,e,n)&&(e=A);for(var i=-1,r=Ia(t),o=r.length,s={};++i<o;){var a=r[i],u=t[a];e?es.call(s,u)?s[u].push(a):s[u]=[a]:s[u]=a}return s}function to(t){if(null==t)return[];Cr(t)||(t=$o(t));var e=t.length;e=e&&ni(e)&&(Oa(t)||kr(t))&&e||0;for(var n=t.constructor,i=-1,r="function"==typeof n&&n.prototype===t,o=Go(e),s=e>0;++i<e;)o[i]=i+"";for(var a in t)s&&Hn(a,e)||"constructor"==a&&(r||!es.call(t,a))||o.push(a);return o}function eo(t){t=hi(t);for(var e=-1,n=Ia(t),i=n.length,r=Go(i);++e<i;){var o=n[e];r[e]=[o,t[o]]}return r}function no(t,e,n){var i=null==t?A:t[e];return i===A&&(null==t||ti(e,t)||(e=pi(e),t=1==e.length?t:Ce(t,Ke(e,0,-1)),i=null==t?A:t[Mi(e)]),i=i===A?n:i),Pr(i)?i.call(t):i}function io(t,e,n){if(null==t)return t;var i=e+"";e=null!=t[i]||ti(e,t)?[i]:pi(e);for(var r=-1,o=e.length,s=o-1,a=t;null!=a&&++r<o;){var u=e[r];Cr(a)&&(r==s?a[u]=n:null==a[u]&&(a[u]=Hn(e[r+1])?[]:{})),a=a[u]}return t}function ro(t,e,n,i){var r=Oa(t)||Vr(t);if(e=Gn(e,i,4),null==n)if(r||Cr(t)){var o=t.constructor;n=r?Oa(t)?new o:[]:Ns(Pr(o)?o.prototype:A)}else n={};return(r?ee:Fe)(t,function(t,i,r){return e(n,t,i,r)}),n}function oo(t){return tn(t,Ia(t))}function so(t){return tn(t,to(t))}function ao(t,e,n){return e=+e||0,n===A?(n=e,e=0):n=+n||0,t>=xs(e,n)&&t<ws(e,n)}function uo(t,e,n){n&&Yn(t,e,n)&&(e=n=A);var i=null==t,r=null==e;if(null==n&&(r&&"boolean"==typeof t?(n=t,
t=1):"boolean"==typeof e&&(n=e,r=!0)),i&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Ms();return xs(t+o*(e-t+us("1e-"+((o+"").length-1))),e)}return Qe(t,e)}function lo(t){return t=l(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return t=l(t),t&&t.replace(Lt,d).replace(Ft,"")}function ho(t,e,n){t=l(t),e+="";var i=t.length;return n=n===A?i:xs(0>n?0:+n||0,i),n-=e.length,n>=0&&t.indexOf(e,n)==n}function po(t){return t=l(t),t&&wt.test(t)?t.replace(bt,y):t}function fo(t){return t=l(t),t&&qt.test(t)?t.replace(Ot,_):t||"(?:)"}function yo(t,e,n){t=l(t),e=+e;var i=t.length;if(i>=e||!bs(e))return t;var r=(e-i)/2,o=gs(r),s=_s(r);return n=Pn("",s,n),n.slice(0,o)+t+n}function _o(t,e,n){return(n?Yn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),ks(t,e||(Nt.test(t)?16:10))}function vo(t,e){var n="";if(t=l(t),e=+e,1>e||!t||!bs(e))return n;do e%2&&(n+=t),e=gs(e/2),t+=t;while(e);return n}function go(t,e,n){return t=l(t),n=null==n?0:xs(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function mo(t,n,i){var r=e.templateSettings;i&&Yn(t,n,i)&&(n=i=A),t=l(t),n=_e(ve({},i||n),r,ye);var o,s,a=_e(ve({},n.imports),r.imports,ye),u=Ia(a),c=tn(a,u),h=0,p=n.interpolate||Bt,f="__p += '",d=Ko((n.escape||Bt).source+"|"+p.source+"|"+(p===kt?Pt:Bt).source+"|"+(n.evaluate||Bt).source+"|$","g"),y="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Vt+"]")+"\n";t.replace(d,function(e,n,i,r,a,u){return i||(i=r),f+=t.slice(h,u).replace(It,v),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),f+="';\n";var _=n.variable;_||(f="with (obj) {\n"+f+"\n}\n"),f=(s?f.replace(_t,""):f).replace(vt,"$1").replace(gt,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Xa(function(){return Uo(u,y+"return "+f).apply(A,c)});if(g.source=f,Fr(g))throw g;return g}function bo(t,e,n){var i=t;return(t=l(t))?(n?Yn(i,e,n):null==e)?t.slice(x(t),T(t)+1):(e+="",t.slice(c(t,e),h(t,e)+1)):t}function So(t,e,n){var i=t;return t=l(t),t?(n?Yn(i,e,n):null==e)?t.slice(x(t)):t.slice(c(t,e+"")):t}function wo(t,e,n){var i=t;return t=l(t),t?(n?Yn(i,e,n):null==e)?t.slice(0,T(t)+1):t.slice(0,h(t,e+"")+1):t}function xo(t,e,n){n&&Yn(t,e,n)&&(e=A);var i=L,r=B;if(null!=e)if(Cr(e)){var o="separator"in e?e.separator:o;i="length"in e?+e.length||0:i,r="omission"in e?l(e.omission):r}else i=+e||0;if(t=l(t),i>=t.length)return t;var s=i-r.length;if(1>s)return r;var a=t.slice(0,s);if(null==o)return a+r;if(Gr(o)){if(t.slice(s).search(o)){var u,c,h=t.slice(0,s);for(o.global||(o=Ko(o.source,(Ct.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)c=u.index;a=a.slice(0,null==c?s:c)}}else if(t.indexOf(o,s)!=s){var p=a.lastIndexOf(o);p>-1&&(a=a.slice(0,p))}return a+r}function To(t){return t=l(t),t&&St.test(t)?t.replace(mt,k):t}function ko(t,e,n){return n&&Yn(t,e,n)&&(e=A),t=l(t),t.match(e||Gt)||[]}function Mo(t,e,n){return n&&Yn(t,e,n)&&(e=A),m(t)?Oo(t):be(t,e)}function Ao(t){return function(){return t}}function Eo(t){return t}function Oo(t){return Be(Se(t,!0))}function qo(t,e){return Ie(t,Se(e,!0))}function Fo(t,e,n){if(null==n){var i=Cr(e),r=i?Ia(e):A,o=r&&r.length?Pe(e,r):A;(o?o.length:i)||(o=!1,n=e,e=t,t=this)}o||(o=Pe(e,Ia(e)));var s=!0,a=-1,u=Pr(t),l=o.length;n===!1?s=!1:Cr(n)&&"chain"in n&&(s=n.chain);for(;++a<l;){var c=o[a],h=e[c];t[c]=h,u&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(s||n){var i=t(this.__wrapped__),r=i.__actions__=te(this.__actions__);return r.push({func:e,args:arguments,thisArg:t}),i.__chain__=n,i}return e.apply(t,le([this.value()],arguments))}}(h))}return t}function Ro(){return ie._=rs,this}function Po(){}function Co(t){return ti(t)?Ve(t):Ue(t)}function No(t){return function(e){return Ce(t,pi(e),e+"")}}function jo(t,e,n){n&&Yn(t,e,n)&&(e=n=A),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var i=-1,r=ws(_s((e-t)/(n||1)),0),o=Go(r);++i<r;)o[i]=t,t+=n;return o}function Do(t,e,n){if(t=gs(t),1>t||!bs(t))return[];var i=-1,r=Go(xs(t,Os));for(e=sn(e,n,1);++i<t;)Os>i?r[i]=e(i):e(i);return r}function Lo(t){var e=++ns;return l(t)+e}function Bo(t,e){return(+t||0)+(+e||0)}function Io(t,e,n){return n&&Yn(t,e,n)&&(e=A),e=Gn(e,n,3),1==e.length?fe(Oa(t)?t:ci(t),e):He(t,e)}t=t?re.defaults(ie.Object(),t,re.pick(ie,Wt)):ie;var Go=t.Array,Wo=t.Date,Vo=t.Error,Uo=t.Function,zo=t.Math,Qo=t.Number,$o=t.Object,Ko=t.RegExp,Zo=t.String,Jo=t.TypeError,Xo=Go.prototype,Ho=$o.prototype,Yo=Zo.prototype,ts=Uo.prototype.toString,es=Ho.hasOwnProperty,ns=0,is=Ho.toString,rs=ie._,os=Ko("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=t.ArrayBuffer,as=t.clearTimeout,us=t.parseFloat,ls=zo.pow,cs=Ho.propertyIsEnumerable,hs=zn(t,"Set"),ps=t.setTimeout,fs=Xo.splice,ds=t.Uint8Array,ys=zn(t,"WeakMap"),_s=zo.ceil,vs=zn($o,"create"),gs=zo.floor,ms=zn(Go,"isArray"),bs=t.isFinite,Ss=zn($o,"keys"),ws=zo.max,xs=zo.min,Ts=zn(Wo,"now"),ks=t.parseInt,Ms=zo.random,As=Qo.NEGATIVE_INFINITY,Es=Qo.POSITIVE_INFINITY,Os=4294967295,qs=Os-1,Fs=Os>>>1,Rs=9007199254740991,Ps=ys&&new ys,Cs={};e.support={};e.templateSettings={escape:xt,evaluate:Tt,interpolate:kt,variable:"",imports:{_:e}};var Ns=function(){function t(){}return function(e){if(Cr(e)){t.prototype=e;var n=new t;t.prototype=A}return n||{}}}(),js=pn(Fe),Ds=pn(Re,!0),Ls=fn(),Bs=fn(!0),Is=Ps?function(t,e){return Ps.set(t,e),t}:Eo,Gs=Ps?function(t){return Ps.get(t)}:Po,Ws=Ve("length"),Vs=function(){var t=0,e=0;return function(n,i){var r=ya(),o=G-(r-e);if(e=r,o>0){if(++t>=I)return n}else t=0;return Is(n,i)}}(),Us=vr(function(t,e){return m(t)&&Xn(t)?xe(t,Oe(e,!1,!0)):[]}),zs=wn(),Qs=wn(!0),$s=vr(function(t){for(var e=t.length,n=e,i=Go(h),r=Vn(),o=r==a,s=[];n--;){var u=t[n]=Xn(u=t[n])?u:[];i[n]=o&&u.length>=120?yn(n&&u):null}var l=t[0],c=-1,h=l?l.length:0,p=i[0];t:for(;++c<h;)if(u=l[c],(p?Xt(p,u):r(s,u,0))<0){for(var n=e;--n;){var f=i[n];if((f?Xt(f,u):r(t[n],u,0))<0)continue t}p&&p.push(u),s.push(u)}return s}),Ks=vr(function(t,e){e=Oe(e);var n=ge(t,e);return ze(t,e.sort(o)),n}),Zs=jn(),Js=jn(!0),Xs=vr(function(t){return Ye(Oe(t,!1,!0))}),Hs=vr(function(t,e){return Xn(t)?xe(t,e):[]}),Ys=vr(Di),ta=vr(function(t){var e=t.length,n=e>2?t[e-2]:A,i=e>1?t[e-1]:A;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof i?(--e,i):A,i=A),t.length=e,Li(t,n,i)}),ea=vr(function(t){return t=Oe(t),this.thru(function(e){return Yt(Oa(e)?e:[hi(e)],t)})}),na=vr(function(t,e){return ge(t,Oe(e))}),ia=cn(function(t,e,n){es.call(t,n)?++t[n]:t[n]=1}),ra=Sn(js),oa=Sn(Ds,!0),sa=kn(ee,js),aa=kn(ne,Ds),ua=cn(function(t,e,n){es.call(t,n)?t[n].push(e):t[n]=[e]}),la=cn(function(t,e,n){t[n]=e}),ca=vr(function(t,e,n){var i=-1,r="function"==typeof e,o=ti(e),s=Xn(t)?Go(t.length):[];return js(t,function(t){var a=r?e:o&&null!=t?t[e]:A;s[++i]=a?a.apply(t,n):Jn(t,e,n)}),s}),ha=cn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),pa=Fn(ce,js),fa=Fn(he,Ds),da=vr(function(t,e){if(null==t)return[];var n=e[2];return n&&Yn(e[0],e[1],n)&&(e.length=1),Xe(t,Oe(e),[])}),ya=Ts||function(){return(new Wo).getTime()},_a=vr(function(t,e,n){var i=O;if(n.length){var r=S(n,_a.placeholder);i|=C}return Dn(t,i,e,n,r)}),va=vr(function(t,e){e=e.length?Oe(e):Jr(t);for(var n=-1,i=e.length;++n<i;){var r=e[n];t[r]=Dn(t[r],O,t)}return t}),ga=vr(function(t,e,n){var i=O|q;if(n.length){var r=S(n,ga.placeholder);i|=C}return Dn(e,i,t,n,r)}),ma=gn(R),ba=gn(P),Sa=vr(function(t,e){return we(t,1,e)}),wa=vr(function(t,e,n){return we(t,e,n)}),xa=Tn(),Ta=Tn(!0),ka=vr(function(t,e){if(e=Oe(e),"function"!=typeof t||!oe(e,u))throw new Jo(z);var n=e.length;return vr(function(i){for(var r=xs(i.length,n);r--;)i[r]=e[r](i[r]);return t.apply(this,i)})}),Ma=qn(C),Aa=qn(N),Ea=vr(function(t,e){return Dn(t,D,A,A,A,Oe(e))}),Oa=ms||function(t){return m(t)&&ni(t.length)&&is.call(t)==K},qa=hn(Ge),Fa=hn(function(t,e,n){return n?_e(t,e,n):ve(t,e)}),Ra=mn(Fa,de),Pa=mn(qa,oi),Ca=xn(Fe),Na=xn(Re),ja=Mn(Ls),Da=Mn(Bs),La=An(Fe),Ba=An(Re),Ia=Ss?function(t){var e=null==t?A:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Xn(t)?li(t):Cr(t)?Ss(t):[]}:li,Ga=En(!0),Wa=En(),Va=vr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Oe(e),Zo);return si(t,xe(to(t),e))}var n=sn(e[0],e[1],3);return ai(t,function(t,e,i){return!n(t,e,i)})}),Ua=vr(function(t,e){return null==t?{}:"function"==typeof e[0]?ai(t,sn(e[0],e[1],3)):si(t,Oe(e))}),za=_n(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Qa=_n(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),$a=On(),Ka=On(!0),Za=_n(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ja=_n(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Xa=vr(function(t,e){try{return t.apply(A,e)}catch(n){return Fr(n)?n:new Vo(n)}}),Ha=vr(function(t,e){return function(n){return Jn(n,t,e)}}),Ya=vr(function(t,e){return function(n){return Jn(t,n,e)}}),tu=Nn("ceil"),eu=Nn("floor"),nu=bn(xr,As),iu=bn(zr,Es),ru=Nn("round");return e.prototype=n.prototype,i.prototype=Ns(n.prototype),i.prototype.constructor=i,r.prototype=Ns(n.prototype),r.prototype.constructor=r,ot.prototype["delete"]=Qt,ot.prototype.get=$t,ot.prototype.has=Kt,ot.prototype.set=Zt,Jt.prototype.push=Ht,dr.Cache=ot,e.after=cr,e.ary=hr,e.assign=Fa,e.at=na,e.before=pr,e.bind=_a,e.bindAll=va,e.bindKey=ga,e.callback=Mo,e.chain=Gi,e.chunk=di,e.compact=yi,e.constant=Ao,e.countBy=ia,e.create=Zr,e.curry=ma,e.curryRight=ba,e.debounce=fr,e.defaults=Ra,e.defaultsDeep=Pa,e.defer=Sa,e.delay=wa,e.difference=Us,e.drop=_i,e.dropRight=vi,e.dropRightWhile=gi,e.dropWhile=mi,e.fill=bi,e.filter=Xi,e.flatten=wi,e.flattenDeep=xi,e.flow=xa,e.flowRight=Ta,e.forEach=sa,e.forEachRight=aa,e.forIn=ja,e.forInRight=Da,e.forOwn=La,e.forOwnRight=Ba,e.functions=Jr,e.groupBy=ua,e.indexBy=la,e.initial=ki,e.intersection=$s,e.invert=Yr,e.invoke=ca,e.keys=Ia,e.keysIn=to,e.map=tr,e.mapKeys=Ga,e.mapValues=Wa,e.matches=Oo,e.matchesProperty=qo,e.memoize=dr,e.merge=qa,e.method=Ha,e.methodOf=Ya,e.mixin=Fo,e.modArgs=ka,e.negate=yr,e.omit=Va,e.once=_r,e.pairs=eo,e.partial=Ma,e.partialRight=Aa,e.partition=ha,e.pick=Ua,e.pluck=er,e.property=Co,e.propertyOf=No,e.pull=Ei,e.pullAt=Ks,e.range=jo,e.rearg=Ea,e.reject=nr,e.remove=Oi,e.rest=qi,e.restParam=vr,e.set=io,e.shuffle=rr,e.slice=Fi,e.sortBy=ar,e.sortByAll=da,e.sortByOrder=ur,e.spread=gr,e.take=Ri,e.takeRight=Pi,e.takeRightWhile=Ci,e.takeWhile=Ni,e.tap=Wi,e.throttle=mr,e.thru=Vi,e.times=Do,e.toArray=$r,e.toPlainObject=Kr,e.transform=ro,e.union=Xs,e.uniq=ji,e.unzip=Di,e.unzipWith=Li,e.values=oo,e.valuesIn=so,e.where=lr,e.without=Hs,e.wrap=br,e.xor=Bi,e.zip=Ys,e.zipObject=Ii,e.zipWith=ta,e.backflow=Ta,e.collect=tr,e.compose=Ta,e.each=sa,e.eachRight=aa,e.extend=Fa,e.iteratee=Mo,e.methods=Jr,e.object=Ii,e.select=Xi,e.tail=qi,e.unique=ji,Fo(e,e),e.add=Bo,e.attempt=Xa,e.camelCase=za,e.capitalize=lo,e.ceil=tu,e.clone=Sr,e.cloneDeep=wr,e.deburr=co,e.endsWith=ho,e.escape=po,e.escapeRegExp=fo,e.every=Ji,e.find=ra,e.findIndex=zs,e.findKey=Ca,e.findLast=oa,e.findLastIndex=Qs,e.findLastKey=Na,e.findWhere=Hi,e.first=Si,e.floor=eu,e.get=Xr,e.gt=xr,e.gte=Tr,e.has=Hr,e.identity=Eo,e.includes=Yi,e.indexOf=Ti,e.inRange=ao,e.isArguments=kr,e.isArray=Oa,e.isBoolean=Mr,e.isDate=Ar,e.isElement=Er,e.isEmpty=Or,e.isEqual=qr,e.isError=Fr,e.isFinite=Rr,e.isFunction=Pr,e.isMatch=Nr,e.isNaN=jr,e.isNative=Dr,e.isNull=Lr,e.isNumber=Br,e.isObject=Cr,e.isPlainObject=Ir,e.isRegExp=Gr,e.isString=Wr,e.isTypedArray=Vr,e.isUndefined=Ur,e.kebabCase=Qa,e.last=Mi,e.lastIndexOf=Ai,e.lt=zr,e.lte=Qr,e.max=nu,e.min=iu,e.noConflict=Ro,e.noop=Po,e.now=ya,e.pad=yo,e.padLeft=$a,e.padRight=Ka,e.parseInt=_o,e.random=uo,e.reduce=pa,e.reduceRight=fa,e.repeat=vo,e.result=no,e.round=ru,e.runInContext=M,e.size=or,e.snakeCase=Za,e.some=sr,e.sortedIndex=Zs,e.sortedLastIndex=Js,e.startCase=Ja,e.startsWith=go,e.sum=Io,e.template=mo,e.trim=bo,e.trimLeft=So,e.trimRight=wo,e.trunc=xo,e.unescape=To,e.uniqueId=Lo,e.words=ko,e.all=Ji,e.any=sr,e.contains=Yi,e.eq=qr,e.detect=ra,e.foldl=pa,e.foldr=fa,e.head=Si,e.include=Yi,e.inject=pa,Fo(e,function(){var t={};return Fe(e,function(n,i){e.prototype[i]||(t[i]=n)}),t}(),!1),e.sample=ir,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ir(e,t)}):ir(this.value())},e.VERSION=E,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){r.prototype[t]=function(n){var i=this.__filtered__;if(i&&!e)return new r(this);n=null==n?1:ws(gs(n)||0,0);var o=this.clone();return i?o.__takeCount__=xs(o.__takeCount__,n):o.__views__.push({size:n,type:t+(o.__dir__<0?"Right":"")}),o},r.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n!=U;r.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:Gn(t,e,1),type:n}),r.__filtered__=r.__filtered__||i,r}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");r.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");r.prototype[t]=function(){return this.__filtered__?new r(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",i=e?Be:Co;r.prototype[t]=function(t){return this[n](i(t))}}),r.prototype.compact=function(){return this.filter(Eo)},r.prototype.reject=function(t,e){return t=Gn(t,e,1),this.filter(function(e){return!t(e)})},r.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new r(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==A&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},r.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},r.prototype.toArray=function(){return this.take(Es)},Fe(r.prototype,function(t,n){var o=/^(?:filter|map|reject)|While$/.test(n),s=/^(?:first|last)$/.test(n),a=e[s?"take"+("last"==n?"Right":""):n];a&&(e.prototype[n]=function(){var e=s?[1]:arguments,n=this.__chain__,u=this.__wrapped__,l=!!this.__actions__.length,c=u instanceof r,h=e[0],p=c||Oa(u);p&&o&&"function"==typeof h&&1!=h.length&&(c=p=!1);var f=function(t){return s&&n?a(t,1)[0]:a.apply(A,le([t],e))},d={func:Vi,args:[f],thisArg:A},y=c&&!l;if(s&&!n)return y?(u=u.clone(),u.__actions__.push(d),t.call(u)):a.call(A,this.value())[0];if(!s&&p){u=y?u:new r(this);var _=t.apply(u,e);return _.__actions__.push(d),new i(_,n)}return this.thru(f)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Yo:Xo)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?n.apply(this.value(),t):this[i](function(e){return n.apply(e,t)})}}),Fe(r.prototype,function(t,n){var i=e[n];if(i){var r=i.name,o=Cs[r]||(Cs[r]=[]);o.push({name:n,func:i})}}),Cs[Rn(A,q).name]=[{name:"wrapper",func:A}],r.prototype.clone=b,r.prototype.reverse=Y,r.prototype.value=it,e.prototype.chain=Ui,e.prototype.commit=zi,e.prototype.concat=ea,e.prototype.plant=Qi,e.prototype.reverse=$i,e.prototype.toString=Ki,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Zi,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var A,E="3.10.0",O=1,q=2,F=4,R=8,P=16,C=32,N=64,j=128,D=256,L=30,B="...",I=150,G=16,W=200,V=1,U=2,z="Expected a function",Q="__lodash_placeholder__",$="[object Arguments]",K="[object Array]",Z="[object Boolean]",J="[object Date]",X="[object Error]",H="[object Function]",Y="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",it="[object Set]",rt="[object String]",ot="[object WeakMap]",st="[object ArrayBuffer]",at="[object Float32Array]",ut="[object Float64Array]",lt="[object Int8Array]",ct="[object Int16Array]",ht="[object Int32Array]",pt="[object Uint8Array]",ft="[object Uint8ClampedArray]",dt="[object Uint16Array]",yt="[object Uint32Array]",_t=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,bt=/[&<>"'`]/g,St=RegExp(mt.source),wt=RegExp(bt.source),xt=/<%-([\s\S]+?)%>/g,Tt=/<%([\s\S]+?)%>/g,kt=/<%=([\s\S]+?)%>/g,Mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,At=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ot=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,qt=RegExp(Ot.source),Ft=/[\u0300-\u036f\ufe20-\ufe23]/g,Rt=/\\(\\)?/g,Pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ct=/\w*$/,Nt=/^0[xX]/,jt=/^\[object .+?Constructor\]$/,Dt=/^\d+$/,Lt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Bt=/($^)/,It=/['\n\r\u2028\u2029\\]/g,Gt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Wt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Vt=-1,Ut={};Ut[at]=Ut[ut]=Ut[lt]=Ut[ct]=Ut[ht]=Ut[pt]=Ut[ft]=Ut[dt]=Ut[yt]=!0,Ut[$]=Ut[K]=Ut[st]=Ut[Z]=Ut[J]=Ut[X]=Ut[H]=Ut[Y]=Ut[tt]=Ut[et]=Ut[nt]=Ut[it]=Ut[rt]=Ut[ot]=!1;var zt={};zt[$]=zt[K]=zt[st]=zt[Z]=zt[J]=zt[at]=zt[ut]=zt[lt]=zt[ct]=zt[ht]=zt[tt]=zt[et]=zt[nt]=zt[rt]=zt[pt]=zt[ft]=zt[dt]=zt[yt]=!0,zt[X]=zt[H]=zt[Y]=zt[it]=zt[ot]=!1;var Qt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},$t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Kt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Zt={"function":!0,object:!0},Jt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Zt[typeof e]&&e&&!e.nodeType&&e,Yt=Zt[typeof t]&&t&&!t.nodeType&&t,te=Ht&&Yt&&"object"==typeof r&&r&&r.Object&&r,ee=Zt[typeof self]&&self&&self.Object&&self,ne=Zt[typeof window]&&window&&window.Object&&window,ie=(Yt&&Yt.exports===Ht&&Ht,te||ne!==(this&&this.window)&&ne||ee||this),re=M();ie._=re,i=function(){return re}.call(e,n,e,t),!(i!==A&&(t.exports=i))}).call(this)}).call(e,n(12)(t),function(){return this}())},function(t,e,n){var i;(function(t){var r=function o(t,e){function n(t){O=t.document,q=t.location,R=t.cancelAnimationFrame||t.clearTimeout,F=t.requestAnimationFrame||t.setTimeout}function i(){var t,e=[].slice.call(arguments),n=!(null==e[1]||D.call(e[1])!==P||"tag"in e[1]||"view"in e[1]||"subtree"in e[1]),i=n?e[1]:{},r="class"in i?"class":"className",o={tag:"div",attrs:{}},s=[];if(D.call(e[0])!=N)throw new Error("selector in m(selector, attrs, children) should be a string");for(;t=L.exec(e[0]);)if(""===t[1]&&t[2])o.tag=t[2];else if("#"===t[1])o.attrs.id=t[2];else if("."===t[1])s.push(t[2]);else if("["===t[3][0]){var a=B.exec(t[3]);o.attrs[a[1]]=a[3]||(a[2]?"":!0)}var u=n?e.slice(2):e.slice(1);1===u.length&&D.call(u[0])===C?o.children=u[0]:o.children=u;for(var l in i)i.hasOwnProperty(l)&&(l===r&&null!=i[l]&&""!==i[l]?(s.push(i[l]),o.attrs[l]=""):o.attrs[l]=i[l]);return s.length>0&&(o.attrs[r]=s.join(" ")),o}function r(t,n,o,l,h,p,f,d,y,_,v){try{(null==h||null==h.toString())&&(h="")}catch(g){h=""}if("retain"===h.subtree)return p;var m=D.call(p),b=D.call(h);if(null==p||m!==b){if(null!=p)if(o&&o.nodes){var S=d-l,w=S+(b===C?h:p.nodes).length;u(o.nodes.slice(S,w),o.slice(S,w))}else p.nodes&&u(p.nodes,p);p=new h.constructor,p.tag&&(p={}),p.nodes=[]}if(b===C){for(var x=0,T=h.length;T>x;x++)D.call(h[x])===C&&(h=h.concat.apply([],h),x--,T=h.length);for(var k=[],M=p.length===h.length,A=0,E=1,q=2,F=3,R={},L=!1,x=0;x<p.length;x++)p[x]&&p[x].attrs&&null!=p[x].attrs.key&&(L=!0,R[p[x].attrs.key]={action:E,index:x});for(var B=0,x=0,T=h.length;T>x;x++)if(h[x]&&h[x].attrs&&null!=h[x].attrs.key){for(var W=0,T=h.length;T>W;W++)h[W]&&h[W].attrs&&null==h[W].attrs.key&&(h[W].attrs.key="__mithril__"+B++);break}if(L){var V=!1;if(h.length!=p.length)V=!0;else for(var U,z,x=0;U=p[x],z=h[x];x++)if(U.attrs&&z.attrs&&U.attrs.key!=z.attrs.key){V=!0;break}if(V){for(var x=0,T=h.length;T>x;x++)if(h[x]&&h[x].attrs&&null!=h[x].attrs.key){var Q=h[x].attrs.key;R[Q]?R[Q]={action:F,index:x,from:R[Q].index,element:p.nodes[R[Q].index]||O.createElement("div")}:R[Q]={action:q,index:x}}var $=[];for(var K in R)$.push(R[K]);var Z=$.sort(s),J=new Array(p.length);J.nodes=p.nodes.slice();for(var X,x=0;X=Z[x];x++){if(X.action===E&&(u(p[X.index].nodes,p[X.index]),J.splice(X.index,1)),X.action===q){var H=O.createElement("div");H.key=h[X.index].attrs.key,t.insertBefore(H,t.childNodes[X.index]||null),J.splice(X.index,0,{attrs:{key:h[X.index].attrs.key},nodes:[H]}),J.nodes[X.index]=H}X.action===F&&(t.childNodes[X.index]!==X.element&&null!==X.element&&t.insertBefore(X.element,t.childNodes[X.index]||null),J[X.index]=p[X.from],J.nodes[X.index]=X.element)}p=J}}for(var x=0,Y=0,T=h.length;T>x;x++){var et=r(t,n,p,d,h[x],p[Y],f,d+A||A,y,_,v);et!==e&&(et.nodes.intact||(M=!1),A+=et.$trusted?(et.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:D.call(et)===C?et.length:1,p[Y++]=et)}if(!M){for(var x=0,T=h.length;T>x;x++)null!=p[x]&&k.push.apply(k,p[x].nodes);for(var nt,x=0;nt=p.nodes[x];x++)null!=nt.parentNode&&k.indexOf(nt)<0&&u([nt],[p[x]]);h.length<p.length&&(p.length=h.length),p.nodes=k}}else if(null!=h&&b===P){for(var rt=[],ot=[];h.view;){var st=h.view.$original||h.view,at="diff"==i.redraw.strategy()&&p.views?p.views.indexOf(st):-1,ut=at>-1?p.controllers[at]:new(h.controller||G),Q=h&&h.attrs&&h.attrs.key;if(h=0==it||p&&p.controllers&&p.controllers.indexOf(ut)>-1?h.view(ut):{tag:"placeholder"},"retain"===h.subtree)return p;Q&&(h.attrs||(h.attrs={}),h.attrs.key=Q),ut.onunload&&tt.push({controller:ut,handler:ut.onunload}),rt.push(st),ot.push(ut)}if(!h.tag&&ot.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");h.attrs||(h.attrs={}),p.attrs||(p.attrs={});var lt=Object.keys(h.attrs),ct=lt.length>("key"in h.attrs?1:0);if((h.tag!=p.tag||lt.sort().join()!=Object.keys(p.attrs).sort().join()||h.attrs.id!=p.attrs.id||h.attrs.key!=p.attrs.key||"all"==i.redraw.strategy()&&(!p.configContext||p.configContext.retain!==!0)||"diff"==i.redraw.strategy()&&p.configContext&&p.configContext.retain===!1)&&(p.nodes.length&&u(p.nodes),p.configContext&&typeof p.configContext.onunload===j&&p.configContext.onunload(),p.controllers))for(var ut,x=0;ut=p.controllers[x];x++)typeof ut.onunload===j&&ut.onunload({preventDefault:G});if(D.call(h.tag)!=N)return;var nt,ht=0===p.nodes.length;if(h.attrs.xmlns?_=h.attrs.xmlns:"svg"===h.tag?_="http://www.w3.org/2000/svg":"math"===h.tag&&(_="http://www.w3.org/1998/Math/MathML"),ht){if(nt=h.attrs.is?_===e?O.createElement(h.tag,h.attrs.is):O.createElementNS(_,h.tag,h.attrs.is):_===e?O.createElement(h.tag):O.createElementNS(_,h.tag),p={tag:h.tag,attrs:ct?a(nt,h.tag,h.attrs,{},_):h.attrs,children:null!=h.children&&h.children.length>0?r(nt,h.tag,e,e,h.children,p.children,!0,0,h.attrs.contenteditable?nt:y,_,v):h.children,nodes:[nt]},ot.length){p.views=rt,p.controllers=ot;for(var ut,x=0;ut=ot[x];x++)if(ut.onunload&&ut.onunload.$old&&(ut.onunload=ut.onunload.$old),it&&ut.onunload){var pt=ut.onunload;ut.onunload=G,ut.onunload.$old=pt}}p.children&&!p.children.nodes&&(p.children.nodes=[]),"select"===h.tag&&"value"in h.attrs&&a(nt,h.tag,{value:h.attrs.value},{},_),t.insertBefore(nt,t.childNodes[d]||null)}else nt=p.nodes[0],ct&&a(nt,h.tag,h.attrs,p.attrs,_),p.children=r(nt,h.tag,e,e,h.children,p.children,!1,0,h.attrs.contenteditable?nt:y,_,v),p.nodes.intact=!0,ot.length&&(p.views=rt,p.controllers=ot),f===!0&&null!=nt&&t.insertBefore(nt,t.childNodes[d]||null);if(typeof h.attrs.config===j){var ft=p.configContext=p.configContext||{},dt=function(t,e){return function(){return t.attrs.config.apply(t,e)}};v.push(dt(h,[nt,!ht,ft,p]))}}else if(typeof h!=j){var k;0===p.nodes.length?(h.$trusted?k=c(t,d,h):(k=[O.createTextNode(h)],t.nodeName.match(I)||t.insertBefore(k[0],t.childNodes[d]||null)),p="string number boolean".indexOf(typeof h)>-1?new h.constructor(h):h,p.nodes=k):p.valueOf()!==h.valueOf()||f===!0?(k=p.nodes,y&&y===O.activeElement||(h.$trusted?(u(k,p),k=c(t,d,h)):"textarea"===n?t.value=h:y?y.innerHTML=h:((1===k[0].nodeType||k.length>1)&&(u(p.nodes,p),k=[O.createTextNode(h)]),t.insertBefore(k[0],t.childNodes[d]||null),k[0].nodeValue=h)),p=new h.constructor(h),p.nodes=k):p.nodes.intact=!0}return p}function s(t,e){return t.action-e.action||t.index-e.index}function a(t,e,n,i,r){for(var o in n){var s=n[o],a=i[o];if(o in i&&a===s)"value"===o&&"input"===e&&t.value!=s&&(t.value=s);else{i[o]=s;try{if("config"===o||"key"==o)continue;if(typeof s===j&&0===o.indexOf("on"))t[o]=h(s,t);else if("style"===o&&null!=s&&D.call(s)===P){for(var u in s)(null==a||a[u]!==s[u])&&(t.style[u]=s[u]);for(var u in a)u in s||(t.style[u]="")}else null!=r?"href"===o?t.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===o?t.setAttribute("class",s):t.setAttribute(o,s):o in t&&"list"!==o&&"style"!==o&&"form"!==o&&"type"!==o&&"width"!==o&&"height"!==o?("input"!==e||t[o]!==s)&&(t[o]=s):t.setAttribute(o,s)}catch(l){if(l.message.indexOf("Invalid argument")<0)throw l}}}return i}function u(t,e){for(var n=t.length-1;n>-1;n--)if(t[n]&&t[n].parentNode){try{t[n].parentNode.removeChild(t[n])}catch(i){}e=[].concat(e),e[n]&&l(e[n])}0!=t.length&&(t.length=0)}function l(t){if(t.configContext&&typeof t.configContext.onunload===j&&(t.configContext.onunload(),t.configContext.onunload=null),t.controllers)for(var e,n=0;e=t.controllers[n];n++)typeof e.onunload===j&&e.onunload({preventDefault:G});if(t.children)if(D.call(t.children)===C)for(var i,n=0;i=t.children[n];n++)l(i);else t.children.tag&&l(t.children)}function c(t,e,n){var i=t.childNodes[e];if(i){var r=1!=i.nodeType,o=O.createElement("span");r?(t.insertBefore(o,i||null),o.insertAdjacentHTML("beforebegin",n),t.removeChild(o)):i.insertAdjacentHTML("beforebegin",n)}else t.insertAdjacentHTML("beforeend",n);for(var s=[];t.childNodes[e]!==i;)s.push(t.childNodes[e]),e++;return s}function h(t,e){return function(n){n=n||event,i.redraw.strategy("diff"),i.startComputation();try{return t.call(e,n)}finally{rt()}}}function p(t){var e=U.indexOf(t);return 0>e?U.push(t)-1:e}function f(t){var e=function(){return arguments.length&&(t=arguments[0]),t};return e.toJSON=function(){return t},e}function d(t,e){var n=function(){return(t.controller||G).apply(this,e)||this},i=function(n){return arguments.length>1&&(e=e.concat([].slice.call(arguments,1))),t.view.apply(t,e?[n].concat(e):[n])};i.$original=t.view;var r={controller:n,view:i};return e[0]&&null!=e[0].key&&(r.attrs={key:e[0].key}),r}function y(){H&&(H(),H=null);for(var t,e=0;t=$[e];e++)if(Z[e]){var n=K[e].controller&&K[e].controller.$$args?[Z[e]].concat(K[e].controller.$$args):[Z[e]];i.render(t,K[e].view?K[e].view(Z[e],n):"")}Y&&(Y(),Y=null),J=null,X=new Date,i.redraw.strategy("diff")}function _(t){return t.slice(at[i.route.mode].length)}function v(t,e,n){ot={};var r=n.indexOf("?");-1!==r&&(ot=S(n.substr(r+1,n.length)),n=n.substr(0,r));var o=Object.keys(e),s=o.indexOf(n);if(-1!==s)return i.mount(t,e[o[s]]),!0;for(var a in e){if(a===n)return i.mount(t,e[a]),!0;var u=new RegExp("^"+a.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(u.test(n))return n.replace(u,function(){for(var n=a.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2),o=0,s=n.length;s>o;o++)ot[n[o].replace(/:|\./g,"")]=decodeURIComponent(r[o]);i.mount(t,e[a])}),!0}}function g(t){if(t=t||event,!t.ctrlKey&&!t.metaKey&&2!==t.which){t.preventDefault?t.preventDefault():t.returnValue=!1;for(var e=t.currentTarget||t.srcElement,n="pathname"===i.route.mode&&e.search?S(e.search.slice(1)):{};e&&"A"!=e.nodeName.toUpperCase();)e=e.parentNode;i.route(e[i.route.mode].slice(at[i.route.mode].length),n)}}function m(){"hash"!=i.route.mode&&q.hash?q.hash=q.hash:t.scrollTo(0,0)}function b(t,n){var i={},r=[];for(var o in t){var s=n?n+"["+o+"]":o,a=t[o],u=D.call(a),l=null===a?encodeURIComponent(s):u===P?b(a,s):u===C?a.reduce(function(t,e){return i[s]||(i[s]={}),i[s][e]?t:(i[s][e]=!0,t.concat(encodeURIComponent(s)+"="+encodeURIComponent(e)))},[]).join("&"):encodeURIComponent(s)+"="+encodeURIComponent(a);a!==e&&r.push(l)}return r.join("&")}function S(t){"?"===t.charAt(0)&&(t=t.substring(1));for(var e=t.split("&"),n={},i=0,r=e.length;r>i;i++){var o=e[i].split("="),s=decodeURIComponent(o[0]),a=2==o.length?decodeURIComponent(o[1]):null;null!=n[s]?(D.call(n[s])!==C&&(n[s]=[n[s]]),n[s].push(a)):n[s]=a}return n}function w(t){var n=p(t);u(t.childNodes,z[n]),z[n]=e}function x(t,e){var n=i.prop(e);return t.then(n),n.then=function(n,i){return x(t.then(n,i),e)},n}function T(t,e){function n(t){h=t||l,f.map(function(t){h===u&&t.resolve(p)||t.reject(p)})}function r(t,e,n,r){if((null!=p&&D.call(p)===P||typeof p===j)&&typeof t===j)try{var o=0;t.call(p,function(t){o++||(p=t,e())},function(t){o++||(p=t,n())})}catch(s){i.deferred.onerror(s),p=s,n()}else r()}function o(){var l;try{l=p&&p.then}catch(f){return i.deferred.onerror(f),p=f,h=a,o()}r(l,function(){h=s,o()},function(){h=a,o()},function(){try{h===s&&typeof t===j?p=t(p):h===a&&"function"==typeof e&&(p=e(p),h=s)}catch(o){return i.deferred.onerror(o),p=o,n()}p===c?(p=TypeError(),n()):r(l,function(){n(u)},n,function(){n(h===s&&u)})})}var s=1,a=2,u=3,l=4,c=this,h=0,p=0,f=[];c.promise={},c.resolve=function(t){return h||(p=t,h=s,o()),this},c.reject=function(t){return h||(p=t,h=a,o()),this},c.promise.then=function(t,e){var n=new T(t,e);return h===u?n.resolve(p):h===l?n.reject(p):f.push(n),n.promise}}function k(t){return t}function M(n){if(!n.dataType||"jsonp"!==n.dataType.toLowerCase()){var i=new t.XMLHttpRequest;if(i.open(n.method,n.url,!0,n.user,n.password),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?n.onload({type:"load",target:i}):n.onerror({type:"error",target:i}))},n.serialize===JSON.stringify&&n.data&&"GET"!==n.method&&i.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize===JSON.parse&&i.setRequestHeader("Accept","application/json, text/*"),typeof n.config===j){var r=n.config(i,n);null!=r&&(i=r)}var o="GET"!==n.method&&n.data?n.data:"";if(o&&D.call(o)!=N&&o.constructor!=t.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return i.send(o),i}var s="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),a=O.createElement("script");t[s]=function(i){a.parentNode.removeChild(a),n.onload({type:"load",target:{responseText:i}}),t[s]=e},a.onerror=function(i){return a.parentNode.removeChild(a),n.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),t[s]=e,!1},a.onload=function(t){return!1},a.src=n.url+(n.url.indexOf("?")>0?"&":"?")+(n.callbackKey?n.callbackKey:"callback")+"="+s+"&"+b(n.data||{}),O.body.appendChild(a)}function A(t,e,n){if("GET"===t.method&&"jsonp"!=t.dataType){var i=t.url.indexOf("?")<0?"?":"&",r=b(e);t.url=t.url+(r?i+r:"")}else t.data=n(e);
return t}function E(t,e){var n=t.match(/:[a-z]\w+/gi);if(n&&e)for(var i=0;i<n.length;i++){var r=n[i].slice(1);t=t.replace(n[i],e[r]),delete e[r]}return t}var O,q,F,R,P="[object Object]",C="[object Array]",N="[object String]",j="function",D={}.toString,L=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,B=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,I=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,G=function(){};n(t);var W,V={appendChild:function(t){W===e&&(W=O.createElement("html")),O.documentElement&&O.documentElement!==t?O.replaceChild(t,O.documentElement):O.appendChild(t),this.childNodes=O.childNodes},insertBefore:function(t){this.appendChild(t)},childNodes:[]},U=[],z={};i.render=function(t,n,i){var o=[];if(!t)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var s=p(t),a=t===O,l=a||t===O.documentElement?V:t;a&&"html"!=n.tag&&(n={tag:"html",attrs:{},children:n}),z[s]===e&&u(l.childNodes),i===!0&&w(t),z[s]=r(l,null,e,e,n,z[s],!1,0,null,e,o);for(var c=0,h=o.length;h>c;c++)o[c]()},i.trust=function(t){return t=new String(t),t.$trusted=!0,t},i.prop=function(t){return(null!=t&&D.call(t)===P||typeof t===j)&&typeof t.then===j?x(t):f(t)};var Q,$=[],K=[],Z=[],J=null,X=0,H=null,Y=null,tt=[],et=16;i.component=function(t){return d(t,[].slice.call(arguments,1))},i.mount=i.module=function(t,e){if(!t)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var n=$.indexOf(t);0>n&&(n=$.length);for(var r,o=!1,s={preventDefault:function(){o=!0,H=Y=null}},a=0;r=tt[a];a++)r.handler.call(r.controller,s),r.controller.onunload=null;if(o)for(var r,a=0;r=tt[a];a++)r.controller.onunload=r.handler;else tt=[];if(Z[n]&&typeof Z[n].onunload===j&&Z[n].onunload(s),!o){i.redraw.strategy("all"),i.startComputation(),$[n]=t,arguments.length>2&&(e=subcomponent(e,[].slice.call(arguments,2)));var u=Q=e=e||{controller:function(){}},l=e.controller||G,c=new l;return u===Q&&(Z[n]=c,K[n]=e),rt(),Z[n]}};var nt=!1;i.redraw=function(e){nt||(nt=!0,J&&e!==!0?(F===t.requestAnimationFrame||new Date-X>et)&&(J>0&&R(J),J=F(y,et)):(y(),J=F(function(){J=null},et)),nt=!1)},i.redraw.strategy=i.prop();var it=0;i.startComputation=function(){it++},i.endComputation=function(){it=Math.max(it-1,0),0===it&&i.redraw()};var rt=function(){"none"==i.redraw.strategy()?(it--,i.redraw.strategy("diff")):i.endComputation()};i.withAttr=function(t,e){return function(n){n=n||event;var i=n.currentTarget||this;e(t in i?i[t]:i.getAttribute(t))}};var ot,st,at={pathname:"",hash:"#",search:"?"},ut=G,lt=!1;return i.route=function(){if(0===arguments.length)return st;if(3===arguments.length&&D.call(arguments[1])===N){var e=arguments[0],n=arguments[1],r=arguments[2];ut=function(t){var o=st=_(t);if(!v(e,r,o)){if(lt)throw new Error("Ensure the default route matches one of the routes defined in m.route");lt=!0,i.route(n,!0),lt=!1}};var o="hash"===i.route.mode?"onhashchange":"onpopstate";t[o]=function(){var t=q[i.route.mode];"pathname"===i.route.mode&&(t+=q.search),st!=_(t)&&ut(t)},H=m,t[o]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var s=arguments[0],a=(arguments[1],arguments[2],arguments[3]);s.href=("pathname"!==i.route.mode?q.pathname:"")+at[i.route.mode]+a.attrs.href,s.addEventListener?(s.removeEventListener("click",g),s.addEventListener("click",g)):(s.detachEvent("onclick",g),s.attachEvent("onclick",g))}else if(D.call(arguments[0])===N){var u=st;st=arguments[0];var l=arguments[1]||{},c=st.indexOf("?"),h=c>-1?S(st.slice(c+1)):{};for(var p in l)h[p]=l[p];var f=b(h),d=c>-1?st.slice(0,c):st;f&&(st=d+(-1===d.indexOf("?")?"?":"&")+f);var y=(3===arguments.length?arguments[2]:arguments[1])===!0||u===arguments[0];t.history.pushState?(H=m,Y=function(){t.history[y?"replaceState":"pushState"](null,O.title,at[i.route.mode]+st)},ut(at[i.route.mode]+st)):(q[i.route.mode]=st,ut(at[i.route.mode]+st))}},i.route.param=function(t){if(!ot)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return ot[t]},i.route.mode="search",i.route.buildQueryString=b,i.route.parseQueryString=S,i.deferred=function(){var t=new T;return t.promise=x(t.promise),t},i.deferred.onerror=function(t){if("[object Error]"===D.call(t)&&!t.constructor.toString().match(/ Error/))throw t},i.sync=function(t){function e(t,e){return function(i){return s[t]=i,e||(n="reject"),0===--o&&(r.promise(s),r[n](s)),i}}var n="resolve",r=i.deferred(),o=t.length,s=new Array(o);if(t.length>0)for(var a=0;a<t.length;a++)t[a].then(e(a,!0),e(a,!1));else r.resolve([]);return r.promise},i.request=function(t){t.background!==!0&&i.startComputation();var e=new T,n=t.dataType&&"jsonp"===t.dataType.toLowerCase(),r=t.serialize=n?k:t.serialize||JSON.stringify,o=t.deserialize=n?k:t.deserialize||JSON.parse,s=n?function(t){return t.responseText}:t.extract||function(t){return 0===t.responseText.length&&o===JSON.parse?null:t.responseText};return t.method=(t.method||"GET").toUpperCase(),t.url=E(t.url,t.data),t=A(t,t.data,r),t.onload=t.onerror=function(n){try{n=n||event;var r=("load"===n.type?t.unwrapSuccess:t.unwrapError)||k,a=r(o(s(n.target,t)),n.target);if("load"===n.type)if(D.call(a)===C&&t.type)for(var u=0;u<a.length;u++)a[u]=new t.type(a[u]);else t.type&&(a=new t.type(a));e["load"===n.type?"resolve":"reject"](a)}catch(n){i.deferred.onerror(n),e.reject(n)}t.background!==!0&&i.endComputation()},M(t),e.promise=x(e.promise,t.initialValue),e.promise},i.deps=function(e){return n(t=e||t),t},i.deps.factory=o,i}("undefined"!=typeof window?window:{});"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:(i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}).call(e,n(12)(t))},function(t,e,n){"use strict";function i(t,e){return o.isArray(e)||(e=o.pairs(e)),r("select",t,e.map(function(t){return o.isString(t)&&(t=[t,t]),r("option",{key:t[0],value:t[0]},t[1]||t[0])}))}Object.defineProperty(e,"__esModule",{value:!0}),e.select=i;var r=n(2),o=n(1)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root){"use strict";function Main(t){Tone=t()}function Module(t){t(Tone)}var Tone;/**
		 *  Tone.js
		 *  @author Yotam Mann
		 *  @license http://opensource.org/licenses/MIT MIT License
		 *  @copyright 2014-2015 Yotam Mann
		 */
Main(function(){function t(t){return void 0===t}function e(t){return"function"==typeof t}var n;if(t(window.AudioContext)&&(window.AudioContext=window.webkitAudioContext),t(window.OfflineAudioContext)&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t(AudioContext))throw new Error("Web Audio is not supported in this browser");n=new AudioContext,e(AudioContext.prototype.createGain)||(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),e(AudioContext.prototype.createDelay)||(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),e(AudioContext.prototype.createPeriodicWave)||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable),e(AudioBufferSourceNode.prototype.start)||(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn),e(AudioBufferSourceNode.prototype.stop)||(AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),e(OscillatorNode.prototype.start)||(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn),e(OscillatorNode.prototype.stop)||(OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff),e(OscillatorNode.prototype.setPeriodicWave)||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioNode.prototype._nativeConnect=AudioNode.prototype.connect,AudioNode.prototype.connect=function(e,n,i){if(e.input)Array.isArray(e.input)?(t(i)&&(i=0),this.connect(e.input[i])):this.connect(e.input,n,i);else try{e instanceof AudioNode?this._nativeConnect(e,n,i):this._nativeConnect(e,n)}catch(r){throw new Error("error connecting to node: "+e)}};var i=function(e,n){t(e)||1===e?this.input=this.context.createGain():e>1&&(this.input=new Array(e)),t(n)||1===n?this.output=this.context.createGain():n>1&&(this.output=new Array(e))};i.prototype.set=function(e,n,r){if("object"==typeof e)r=n;else if("string"==typeof e){var o={};o[e]=n,e=o}for(var s in e){n=e[s];var a=this;if(-1!==s.indexOf(".")){for(var u=s.split("."),l=0;l<u.length-1;l++)a=a[u[l]];s=u[u.length-1]}var c=a[s];t(c)||(c instanceof i.Signal?c.value!==n&&(t(r)?c.value=n:c.rampTo(n,r)):c instanceof AudioParam?c.value!==n&&(c.value=n):c instanceof i?c.set(n):c!==n&&(a[s]=n))}return this},i.prototype.get=function(n){t(n)?n=this._collectDefaults(this.constructor):"string"==typeof n&&(n=[n]);for(var r={},o=0;o<n.length;o++){var s=n[o],a=this,u=r;if(-1!==s.indexOf(".")){for(var l=s.split("."),c=0;c<l.length-1;c++){var h=l[c];u[h]=u[h]||{},u=u[h],a=a[h]}s=l[l.length-1]}var p=a[s];"object"==typeof n[s]?u[s]=p.get():p instanceof i.Signal?u[s]=p.value:p instanceof AudioParam?u[s]=p.value:p instanceof i?u[s]=p.get():e(p)||t(p)||(u[s]=p)}return r},i.prototype._collectDefaults=function(e){var n=[];if(t(e.defaults)||(n=Object.keys(e.defaults)),!t(e._super))for(var i=this._collectDefaults(e._super),r=0;r<i.length;r++)-1===n.indexOf(i[r])&&n.push(i[r]);return n},i.prototype.setPreset=function(t){return!this.isUndef(this.preset)&&this.preset.hasOwnProperty(t)&&this.set(this.preset[t]),this},i.prototype.toString=function(){for(var t in i){var n=t[0].match(/^[A-Z]$/),r=i[t]===this.constructor;if(e(i[t])&&n&&r)return t}return"Tone"},i.context=n,i.prototype.context=i.context,i.prototype.bufferSize=2048,i.prototype.bufferTime=i.prototype.bufferSize/i.context.sampleRate,i.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this};var r=null;i.prototype.noGC=function(){return this.output.connect(r),this},AudioNode.prototype.noGC=function(){return this.connect(r),this},i.prototype.connect=function(t,e,n){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,n)):this.output.connect(t,e,n),this},i.prototype.disconnect=function(t){return Array.isArray(this.output)?(t=this.defaultArg(t,0),this.output[t].disconnect()):this.output.disconnect(),this},i.prototype.connectSeries=function(){if(arguments.length>1)for(var t=arguments[0],e=1;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},i.prototype.connectParallel=function(){var t=arguments[0];if(arguments.length>1)for(var e=1;e<arguments.length;e++){var n=arguments[e];t.connect(n)}return this},i.prototype.chain=function(){if(arguments.length>0)for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},i.prototype.fan=function(){if(arguments.length>0)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=i.prototype.chain,AudioNode.prototype.fan=i.prototype.fan,i.prototype.defaultArg=function(e,n){if("object"==typeof e&&"object"==typeof n){var i={};for(var r in e)i[r]=this.defaultArg(e[r],e[r]);for(var o in n)i[o]=this.defaultArg(e[o],n[o]);return i}return t(e)?n:e},i.prototype.optionsObject=function(t,e,n){var i={};if(1===t.length&&"object"==typeof t[0])i=t[0];else for(var r=0;r<e.length;r++)i[e[r]]=t[r];return this.isUndef(n)?i:this.defaultArg(i,n)},i.prototype.isUndef=t,i.prototype.isFunction=e,i.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},i.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},i.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},i.prototype.dbToGain=function(t){return Math.pow(2,t/6)},i.prototype.gainToDb=function(t){return 20*(Math.log(t)/Math.LN10)},i.prototype.now=function(){return this.context.currentTime},i.prototype.samplesToSeconds=function(t){return t/this.context.sampleRate},i.prototype.toSamples=function(t){var e=this.toSeconds(t);return Math.round(e*this.context.sampleRate)},i.prototype.toSeconds=function(t,e){if(e=this.defaultArg(e,this.now()),"number"==typeof t)return t;if("string"==typeof t){var n=0;return"+"===t.charAt(0)&&(t=t.slice(1),n=e),parseFloat(t)+n}return e},i.prototype.isFrequency=function(){var t=new RegExp(/\d*\.?\d+hz$/i);return function(e){return t.test(e)}}(),i.prototype.frequencyToSeconds=function(t){return 1/parseFloat(t)},i.prototype.secondsToFrequency=function(t){return 1/t},i.extend=function(e,n){function r(){}t(n)&&(n=i),r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e,e._super=n},i.Type={Default:"number",Time:"time",Frequency:"frequency",Gain:"gain",NormalRange:"normalrange",AudioRange:"audiorange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Cents:"cents",Degrees:"degrees",MIDI:"midi",TransportTime:"transporttime"},i.State={Started:"started",Stopped:"stopped",Paused:"paused"},i.noOp=function(){};var o=[];return i._initAudioContext=function(t){t(i.context),o.push(t)},i.setContext=function(t){i.prototype.context=t,i.context=t;for(var e=0;e<o.length;e++)o[e](t)},i.startMobile=function(){var t=i.context.createOscillator(),e=i.context.createGain();e.gain.value=0,t.connect(e),e.connect(i.context.destination);var n=i.context.currentTime;t.start(n),t.stop(n+1)},i._initAudioContext(function(t){i.prototype.bufferTime=i.prototype.bufferSize/t.sampleRate,r=t.createGain(),r.gain.value=0,r.connect(t.destination)}),i.version="r5",console.log("%c * Tone.js "+i.version+" * ","background: #000; color: #fff"),i}),Module(function(t){return t.SignalBase=function(){},t.extend(t.SignalBase),t.SignalBase.prototype.connect=function(e,n,i){return e.constructor===t.Signal?(e._value.cancelScheduledValues(0),e._value.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.prototype.connect.call(this,e,n,i),this},t.SignalBase}),Module(function(t){return t.WaveShaper=function(t,e){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||this.isUndef(t)?this._curve=new Float32Array(this.defaultArg(t,1024)):this.isFunction(t)&&(this._curve=new Float32Array(this.defaultArg(e,1024)),this.setMap(t))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,n=this._curve.length;n>e;e++){var i=e/n*2-1;this._curve[e]=t(i,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){if(this._isSafari()){var e=t[0];t.unshift(e)}this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.WaveShaper.prototype._isSafari=function(){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("safari")&&-1===t.indexOf("chrome")},t.WaveShaper.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),Module(function(t){return t.Signal=function(){var e=this.optionsObject(arguments,["value","units"],t.Signal.defaults);this.units=e.units,this.convert=e.convert,this.overridden=!1,this.output=this._scaler=this.context.createGain(),this.input=this._value=this._scaler.gain,e.value instanceof AudioParam?(this._scaler.connect(e.value),e.value.value=0):(this.isUndef(e.param)||(this._scaler.connect(e.param),e.param.value=0),this.value=e.value),t.Signal._constant.chain(this._scaler)},t.extend(t.Signal,t.SignalBase),t.Signal.defaults={value:0,param:void 0,units:t.Type.Default,convert:!0},Object.defineProperty(t.Signal.prototype,"value",{get:function(){return this._toUnits(this._value.value)},set:function(t){var e=this._fromUnits(t);this.cancelScheduledValues(0),this._value.value=e}}),t.Signal.prototype._fromUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return this.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Signal.prototype._toUnits=function(e){if(!this.convert&&!this.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return this.gainToDb(e);default:return e}},t.Signal.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),this._value.setValueAtTime(t,this.toSeconds(e)),this},t.Signal.prototype.setCurrentValueNow=function(t){t=this.defaultArg(t,this.now());var e=this._value.value;return this.cancelScheduledValues(t),this._value.setValueAtTime(e,t),this},t.Signal.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._value.linearRampToValueAtTime(t,this.toSeconds(e)),this},t.Signal.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(1e-5,t),this._value.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},t.Signal.prototype.exponentialRampToValueNow=function(t,e){var n=this.now(),i=this.value;return this.setValueAtTime(Math.max(i,1e-4),n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Signal.prototype.linearRampToValueNow=function(t,e){var n=this.now();return this.setCurrentValueNow(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Signal.prototype.setTargetAtTime=function(t,e,n){return t=this._fromUnits(t),n=Math.max(1e-5,n),this._value.setTargetAtTime(t,this.toSeconds(e),n),this},t.Signal.prototype.setValueCurveAtTime=function(t,e,n){for(var i=0;i<t.length;i++)t[i]=this._fromUnits(t[i]);return this._value.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(n)),this},t.Signal.prototype.cancelScheduledValues=function(t){return this._value.cancelScheduledValues(this.toSeconds(t)),this},t.Signal.prototype.rampTo=function(e,n){return n=this.defaultArg(n,0),this.units===t.Type.Frequency||this.units===t.Type.BPM?this.exponentialRampToValueNow(e,n):this.linearRampToValueNow(e,n),this},t.Signal.prototype.dispose=function(){return t.prototype.dispose.call(this),this._value=null,this._scaler=null,this},t.Signal._generator=null,t.Signal._constant=null,t._initAudioContext(function(e){t.Signal._generator=e.createOscillator(),t.Signal._constant=new t.WaveShaper([1,1]),t.Signal._generator.connect(t.Signal._constant),t.Signal._generator.start(0),t.Signal._generator.noGC()}),t.Signal}),Module(function(t){return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),Module(function(t){return t.Envelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._nextAttack=1/0,this._nextDecay=1/0,this._nextSustain=1/0,this._nextRelease=1/0,this._nextStandby=1/0,this._attackCurve=t.Envelope.Type.Linear,this._peakValue=1,this._minOutput=1e-4,this._sig=this.output=new t.Signal(0),this.attackCurve=e.attackCurve},t.extend(t.Envelope),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear"},t.Envelope.prototype._timeMult=.25,Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this._sig.value}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){return this._attackCurve},set:function(e){if(e!==t.Envelope.Type.Linear&&e!==t.Envelope.Type.Exponential)throw Error('attackCurve must be either "linear" or "exponential". Invalid type: ',e);this._attackCurve=e}}),t.Envelope.prototype._phaseAtTime=function(e){return this._nextRelease>e?this._nextAttack<=e&&this._nextDecay>e?t.Envelope.Phase.Attack:this._nextDecay<=e&&this._nextSustain>e?t.Envelope.Phase.Decay:this._nextSustain<=e&&this._nextRelease>e?t.Envelope.Phase.Sustain:t.Envelope.Phase.Standby:this._nextRelease<e&&this._nextStandby>e?t.Envelope.Phase.Release:t.Envelope.Phase.Standby},t.Envelope.prototype._exponentialApproach=function(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)},t.Envelope.prototype._linearInterpolate=function(t,e,n,i,r){return e+(i-e)*((r-t)/(n-t))},t.Envelope.prototype._exponentialInterpolate=function(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))},t.Envelope.prototype._valueAtTime=function(e){var n=this.toSeconds(this.attack),i=this.toSeconds(this.decay),r=this.toSeconds(this.release);switch(this._phaseAtTime(e)){case t.Envelope.Phase.Attack:return this._attackCurve===t.Envelope.Type.Linear?this._linearInterpolate(this._nextAttack,this._minOutput,this._nextAttack+n,this._peakValue,e):this._exponentialInterpolate(this._nextAttack,this._minOutput,this._nextAttack+n,this._peakValue,e);case t.Envelope.Phase.Decay:return this._exponentialApproach(this._nextDecay,this._peakValue,this.sustain*this._peakValue,i*this._timeMult,e);case t.Envelope.Phase.Release:return this._exponentialApproach(this._nextRelease,this._peakValue,this._minOutput,r*this._timeMult,e);case t.Envelope.Phase.Sustain:return this.sustain*this._peakValue;case t.Envelope.Phase.Standby:return this._minOutput}},t.Envelope.prototype.triggerAttack=function(e,n){e=this.toSeconds(e);var i=this.toSeconds(this.attack),r=this.toSeconds(this.decay),o=this._valueAtTime(e),s=o*i;this._nextAttack=e-s,this._nextDecay=this._nextAttack+i,this._nextSustain=this._nextDecay+r,this._nextRelease=1/0,this._peakValue=this.defaultArg(n,1);var a=this._peakValue,u=this.sustain*a;return this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(o,e),this._attackCurve===t.Envelope.Type.Linear?this._sig.linearRampToValueAtTime(a,this._nextDecay):this._sig.exponentialRampToValueAtTime(a,this._nextDecay),this._sig.setTargetAtTime(u,this._nextDecay,r*this._timeMult),this},t.Envelope.prototype.triggerRelease=function(e){e=this.toSeconds(e);var n=this._phaseAtTime(e),i=this.toSeconds(this.release),r=this._valueAtTime(e);return this._peakValue=r,this._nextRelease=e,this._nextStandby=this._nextRelease+i,this._sig.cancelScheduledValues(this._nextRelease),n===t.Envelope.Phase.Attack?(this._sig.setCurrentValueNow(),this.attackCurve===t.Envelope.Type.Linear?this._sig.linearRampToValueAtTime(this._peakValue,this._nextRelease):this._sig.exponentialRampToValueAtTime(this._peakValue,this._nextRelease)):this._sig.setValueAtTime(this._peakValue,this._nextRelease),this._sig.setTargetAtTime(this._minOutput,this._nextRelease,i*this._timeMult),this},t.Envelope.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,t.Envelope.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this},t.Envelope.Phase={Attack:"attack",Decay:"decay",Sustain:"sustain",Release:"release",Standby:"standby"},t.Envelope.Type={Linear:"linear",Exponential:"exponential"},t.Envelope}),Module(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=this.context.createGain(),this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope}),Module(function(t){return t.Compressor=function(){var e=this.optionsObject(arguments,["threshold","ratio"],t.Compressor.defaults);this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=this._compressor.threshold,this.attack=new t.Signal(this._compressor.attack,t.Type.Time),this.release=new t.Signal(this._compressor.release,t.Type.Time),this.knee=this._compressor.knee,this.ratio=this._compressor.ratio,this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold=null,this.ratio=null,this.knee=null,this},t.Compressor}),Module(function(t){return t.Add=function(e){t.call(this,2,0),this._sum=this.input[0]=this.input[1]=this.output=this.context.createGain(),this._value=this.input[1]=new t.Signal(e),this._value.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.disconnect(),this._sum=null,this._value.dispose(),this._value=null,this},t.Add}),Module(function(t){return t.Multiply=function(e){t.call(this,2,0),this._mult=this.input[0]=this.output=this.context.createGain(),this._value=this.input[1]=this.output.gain,this._value.value=this.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.disconnect(),this._mult=null,this._value=null,this},t.Multiply}),Module(function(t){return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),Module(function(t){return t.Subtract=function(e){t.call(this,2,0),this._sum=this.input[0]=this.output=this.context.createGain(),this._neg=new t.Negate,this._value=this.input[1]=new t.Signal(e),this._value.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._value.dispose(),this._value=null,this},t.Subtract}),Module(function(t){return t.GreaterThanZero=function(){this._thresh=this.output=new t.WaveShaper(function(t){return 0>=t?0:1}),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),Module(function(t){return t.EqualZero=function(){this._scale=this.input=new t.Multiply(1e4),this._thresh=new t.WaveShaper(function(t){return 0===t?1:0},128),this._gtz=this.output=new t.GreaterThanZero,this._scale.chain(this._thresh,this._gtz)},t.extend(t.EqualZero,t.SignalBase),t.EqualZero.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.EqualZero}),Module(function(t){return t.Equal=function(e){t.call(this,2,0),this._sub=this.input[0]=new t.Subtract(e),this._equals=this.output=new t.EqualZero,this._sub.connect(this._equals),this.input[1]=this._sub.input[1]},t.extend(t.Equal,t.SignalBase),Object.defineProperty(t.Equal.prototype,"value",{get:function(){return this._sub.value},set:function(t){this._sub.value=t}}),t.Equal.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this._sub.dispose(),this._sub=null,this},t.Equal}),Module(function(t){t.Select=function(n){n=this.defaultArg(n,2),t.call(this,n,1),this.gate=new t.Signal(0),this._readOnly("gate");for(var i=0;n>i;i++){var r=new e(i);this.input[i]=r,this.gate.connect(r.selecter),r.connect(this.output)}},t.extend(t.Select,t.SignalBase),t.Select.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Select.prototype.dispose=function(){this._writable("gate"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.input.length;e++)this.input[e].dispose(),this.input[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.gate.disconnect(),this.selecter=null,this.gate=null},t.Select}),Module(function(t){return t.IfThenElse=function(){t.call(this,3,0),this._selector=this.output=new t.Select(2),this["if"]=this.input[0]=this._selector.gate,this.then=this.input[1]=this._selector.input[1],this["else"]=this.input[2]=this._selector.input[0]},t.extend(t.IfThenElse,t.SignalBase),t.IfThenElse.prototype.dispose=function(){return t.prototype.dispose.call(this),this._selector.dispose(),this._selector=null,this["if"]=null,this.then=null,this["else"]=null,this},t.IfThenElse}),Module(function(t){return t.OR=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._sum=this.context.createGain(),this._gtz=this.output=new t.GreaterThanZero;for(var n=0;e>n;n++)this.input[n]=this._sum;this._sum.connect(this._gtz)},t.extend(t.OR,t.SignalBase),t.OR.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this._sum.disconnect(),this._sum=null,this},t.OR}),Module(function(t){return t.AND=function(e){e=this.defaultArg(e,2),t.call(this,e,0),this._equals=this.output=new t.Equal(e);for(var n=0;e>n;n++)this.input[n]=this._equals},t.extend(t.AND,t.SignalBase),t.AND.prototype.dispose=function(){return t.prototype.dispose.call(this),this._equals.dispose(),this._equals=null,this},t.AND}),Module(function(t){return t.NOT=t.EqualZero,t.NOT}),Module(function(t){return t.GreaterThan=function(e){t.call(this,2,0),this._value=this.input[0]=new t.Subtract(e),this.input[1]=this._value.input[1],this._gtz=this.output=new t.GreaterThanZero,this._value.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._value.dispose(),this._value=null,this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),Module(function(t){return t.LessThan=function(e){t.call(this,2,0),this._neg=this.input[0]=new t.Negate,this._gt=this.output=new t.GreaterThan,this._rhNeg=new t.Negate,this._value=this.input[1]=new t.Signal(e),this._neg.connect(this._gt),this._value.connect(this._rhNeg),this._rhNeg.connect(this._gt,0,1)},t.extend(t.LessThan,t.Signal),t.LessThan.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._gt.dispose(),this._gt=null,this._rhNeg.dispose(),this._rhNeg=null,this._value.dispose(),this._value=null,this},t.LessThan}),Module(function(t){return t.Abs=function(){t.call(this,1,0),this._ltz=new t.LessThan(0),this._switch=this.output=new t.Select(2),this._negate=new t.Negate,this.input.connect(this._switch,0,0),this.input.connect(this._negate),this._negate.connect(this._switch,0,1),this.input.chain(this._ltz,this._switch.gate)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.prototype.dispose.call(this),this._switch.dispose(),this._switch=null,this._ltz.dispose(),this._ltz=null,this._negate.dispose(),this._negate=null,this},t.Abs}),Module(function(t){return t.Max=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._value=this.input[1]=new t.Signal(e),this._ifThenElse=this.output=new t.IfThenElse,this._gt=new t.GreaterThan,this.input[0].chain(this._gt,this._ifThenElse["if"]),this.input[0].connect(this._ifThenElse.then),this._value.connect(this._ifThenElse["else"]),this._value.connect(this._gt,0,1)},t.extend(t.Max,t.Signal),t.Max.prototype.dispose=function(){return t.prototype.dispose.call(this),this._value.dispose(),this._ifThenElse.dispose(),this._gt.dispose(),this._value=null,this._ifThenElse=null,this._gt=null,this},t.Max}),Module(function(t){return t.Min=function(e){t.call(this,2,0),this.input[0]=this.context.createGain(),this._ifThenElse=this.output=new t.IfThenElse,this._lt=new t.LessThan,this._value=this.input[1]=new t.Signal(e),this.input[0].chain(this._lt,this._ifThenElse["if"]),this.input[0].connect(this._ifThenElse.then),this._value.connect(this._ifThenElse["else"]),this._value.connect(this._lt,0,1)},t.extend(t.Min,t.Signal),t.Min.prototype.dispose=function(){return t.prototype.dispose.call(this),this._value.dispose(),this._ifThenElse.dispose(),this._lt.dispose(),this._value=null,this._ifThenElse=null,this._lt=null,this},t.Min}),Module(function(t){return t.Modulo=function(e){t.call(this,1,1),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){var n=Math.floor((e+1e-4)/t);return n})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),Module(function(t){function e(t,e,n){var i=new t;return n._eval(e[0]).connect(i,0,0),n._eval(e[1]).connect(i,0,1),i}function n(t,e,n){var i=new t;return n._eval(e[0]).connect(i,0,0),i}function i(t){return t?parseFloat(t):void 0}function r(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){var t=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(t);this._nodes=[],this.input=new Array(e);for(var n=0;e>n;n++)this.input[n]=this.context.createGain();var i,r=this._parseTree(t);try{i=this._eval(r)}catch(o){throw this._disposeNodes(),new Error("Could evaluate expression: "+t)}this.output=i},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){var n=new t.Signal(i(e));return n}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[i(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:n.bind(this,t.Abs)},min:{regexp:/^min/,method:e.bind(this,t.Min)},max:{regexp:/^max/,method:e.bind(this,t.Max)},"if":{regexp:/^if/,method:function(e,n){var i=new t.IfThenElse;return n._eval(e[0]).connect(i["if"]),n._eval(e[1]).connect(i.then),n._eval(e[2]).connect(i["else"]),i}},gt0:{regexp:/^gt0/,method:n.bind(this,t.GreaterThanZero)},eq0:{regexp:/^eq0/,method:n.bind(this,t.EqualZero)},mod:{regexp:/^mod/,method:function(e,n){var i=r(e[1]),o=new t.Modulo(i);return n._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,n){var i=r(e[1]),o=new t.Pow(i);return n._eval(e[0]).connect(o),o}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(i,r){return 1===i.length?n(t.Negate,i,r):e(t.Subtract,i,r)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)},">":{regexp:/^\>/,precedence:2,method:e.bind(this,t.GreaterThan)},"<":{regexp:/^</,precedence:2,method:e.bind(this,t.LessThan)},"==":{regexp:/^==/,precedence:3,method:e.bind(this,t.Equal)},"&&":{regexp:/^&&/,precedence:4,method:e.bind(this,t.AND)},"||":{regexp:/^\|\|/,precedence:5,method:e.bind(this,t.OR)}},unary:{"-":{regexp:/^\-/,method:n.bind(this,t.Negate)},"!":{regexp:/^\!/,method:n.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),n=0;if(null!==e)for(var i=0;i<e.length;i++){var r=parseInt(e[i].substr(1))+1;n=Math.max(n,r)}return n},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),n=0;n<t.length;n++)e=e.replace(/\%/i,t[n]);return e},t.Expr.prototype._tokenize=function(e){function n(e){for(var n in t.Expr._Expressions){var i=t.Expr._Expressions[n];for(var r in i){var o=i[r],s=o.regexp,a=e.match(s);if(null!==a)return{type:n,value:a[0],method:o.method}}}throw new SyntaxError("Unexpected token "+e)}for(var i=-1,r=[];e.length>0;){e=e.trim();var o=n(e);r.push(o),e=e.substr(o.value.length)}return{next:function(){return r[++i]},peek:function(){return r[i+1]}}},t.Expr.prototype._parseTree=function(e){function n(t,e){return!c(t)&&"glue"===t.type&&t.value===e}function i(e,n,i){var r=!1,o=t.Expr._Expressions[n];if(!c(e))for(var s in o){var a=o[s];if(a.regexp.test(e.value)){if(c(i))return!0;if(a.precedence===i)return!0}}return r}function r(t){c(t)&&(t=5);var e;e=0>t?o():r(t-1);for(var n=l.peek();i(n,"binary",t);)n=l.next(),e={operator:n.value,method:n.method,args:[e,r(t)]},n=l.peek();return e}function o(){var t,e;return t=l.peek(),i(t,"unary")?(t=l.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):s()}function s(){var t,e;if(t=l.peek(),c(t))throw new SyntaxError("Unexpected termination of expression");if("func"===t.type)return t=l.next(),a(t);if("value"===t.type)return t=l.next(),{method:t.method,args:t.value};if(n(t,"(")){if(l.next(),e=r(),t=l.next(),!n(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Parse error, cannot process token "+t.value)}function a(t){var e,i=[];if(e=l.next(),!n(e,"("))throw new SyntaxError('Expected ( in a function call "'+t.value+'"');if(e=l.peek(),n(e,")")||(i=u()),e=l.next(),!n(e,")"))throw new SyntaxError('Expected ) in a function call "'+t.value+'"');return{method:t.method,args:i,name:name}}function u(){for(var t,e,i=[];;){if(e=r(),c(e))break;if(i.push(e),t=l.peek(),!n(t,","))break;l.next()}return i}var l=this._tokenize(e),c=this.isUndef.bind(this);return r()},t.Expr.prototype._eval=function(t){if(!this.isUndef(t)){var e=t.method(t.args,this);return this._nodes.push(e),e}},t.Expr.prototype._disposeNodes=function(){
for(var t=0;t<this._nodes.length;t++){var e=this._nodes[t];this.isFunction(e.dispose)?e.dispose():this.isFunction(e.disconnect)&&e.disconnect(),e=null,this._nodes[t]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),Module(function(t){return t.EqualPowerGain=function(){this._eqPower=this.input=this.output=new t.WaveShaper(function(t){return Math.abs(t)<.001?0:this.equalPowerScale(t)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),Module(function(t){return t.CrossFade=function(e){t.call(this,2,1),this.a=this.input[0]=this.context.createGain(),this.b=this.input[1]=this.context.createGain(),this.fade=new t.Signal(this.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade),t.CrossFade.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.disconnect(),this.a=null,this.b.disconnect(),this.b=null,this},t.CrossFade}),Module(function(t){return t.Filter=function(){t.call(this);var e=this.optionsObject(arguments,["frequency","type","rolloff"],t.Filter.defaults);this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,units:t.Type.Decibels,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){var e=["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"];if(-1===e.indexOf(t))throw new TypeError("Tone.Filter does not have filter type "+t);this._type=t;for(var n=0;n<this._filters.length;n++)this._filters[n].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){var e=[-12,-24,-48],n=e.indexOf(t);if(-1===n)throw new RangeError("Filter rolloff can only be -12, -24, or -48");n++,this._rolloff=t,this.input.disconnect();for(var i=0;i<this._filters.length;i++)this._filters[i].disconnect(),this._filters[i]=null;this._filters=new Array(n);for(var r=0;n>r;r++){var o=this.context.createBiquadFilter();o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[r]=o}var s=[this.input].concat(this._filters).concat([this.output]);this.connectSeries.apply(this,s)}}),t.Filter.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),Module(function(t){return t.MultibandSplit=function(){var e=this.optionsObject(arguments,["lowFrequency","highFrequency"],t.MultibandSplit.defaults);this.input=this.context.createGain(),this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),Module(function(t){return t.EQ3=function(){var e=this.optionsObject(arguments,["low","mid","high"],t.EQ3.defaults);this.output=this.context.createGain(),this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=this.context.createGain(),this._midGain=this.context.createGain(),this._highGain=this.context.createGain(),this.low=new t.Signal(this._lowGain.gain,t.Type.Decibels),this.mid=new t.Signal(this._midGain.gain,t.Type.Decibels),this.high=new t.Signal(this._highGain.gain,t.Type.Decibels),this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this.low.value=e.low,this.mid.value=e.mid,this.high.value=e.high,this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.disconnect(),this._lowGain=null,this._midGain.disconnect(),this._midGain=null,this._highGain.disconnect(),this._highGain=null,this.low.dispose(),this.low=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.Q=null,this},t.EQ3}),Module(function(t){return t.Scale=function(e,n){this._outputMin=this.defaultArg(e,0),this._outputMax=this.defaultArg(n,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),Module(function(t){return t.ScaleExp=function(e,n,i){this._scale=this.output=new t.Scale(e,n),this._exp=this.input=new t.Pow(this.defaultArg(i,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),Module(function(t){return t.FeedbackCombFilter=function(){t.call(this);var e=this.optionsObject(arguments,["delayTime","resonance"],t.FeedbackCombFilter.defaults);this.resonance=new t.Signal(e.resonance,t.Type.NormalRange),this._delay=this.input=this.output=this.context.createDelay(1),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._feedback=this.context.createGain(),this._delay.chain(this._feedback,this._delay),this.resonance.connect(this._feedback.gain),this.delayTime.connect(this._delay.delayTime),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.disconnect(),this._delay=null,this.delayTime.dispose(),this.delayTime=null,this.resonance.dispose(),this.resonance=null,this._feedback.disconnect(),this._feedback=null,this},t.FeedbackCombFilter}),Module(function(t){return t.Follower=function(){t.call(this);var e=this.optionsObject(arguments,["attack","release"],t.Follower.defaults);this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=this.context.createDelay(),this._delay.delayTime.value=this.bufferTime,this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(t,e){var n=this.bufferTime;t=this.secondsToFrequency(this.toSeconds(t)),e=this.secondsToFrequency(this.toSeconds(e)),t=Math.max(t,n),e=Math.max(e,n),this._frequencyValues.setMap(function(n){return 0>=n?t:e})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.disconnect(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),Module(function(t){return t.Gate=function(){t.call(this);var e=this.optionsObject(arguments,["threshold","attack","release"],t.Gate.defaults);this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(this.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return this.gainToDb(this._gt.value)},set:function(t){this._gt.value=this.dbToGain(t)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),Module(function(t){return t.Clock=function(e,n){this._oscillator=null,this._jsNode=this.context.createScriptProcessor(this.bufferSize,1,1),this._jsNode.onaudioprocess=this._processBuffer.bind(this),this.frequency=new t.Signal(e,t.Type.Frequency),this._upTick=!1,this.tick=n,this.onended=t.noOp,this._jsNode.noGC()},t.extend(t.Clock),t.Clock.prototype.start=function(t){if(!this._oscillator){this._oscillator=this.context.createOscillator(),this._oscillator.type="square",this._oscillator.connect(this._jsNode),this.frequency.connect(this._oscillator.frequency),this._upTick=!1;var e=this.toSeconds(t);this._oscillator.start(e)}return this},t.Clock.prototype.stop=function(t){if(this._oscillator){var e=this.now(),n=this.toSeconds(t,e);this._oscillator.stop(n),this._oscillator=null,t?setTimeout(this.onended,1e3*(n-e)):this.onended()}return this},t.Clock.prototype._processBuffer=function(t){for(var e=this.defaultArg(t.playbackTime,this.now()),n=this._jsNode.bufferSize,i=t.inputBuffer.getChannelData(0),r=this._upTick,o=this,s=0;n>s;s++){var a=i[s];a>0&&!r?(r=!0,setTimeout(function(){var t=e+o.samplesToSeconds(s+2*n);return function(){o.tick&&o.tick(t)}}(),0)):0>a&&r&&(r=!1)}this._upTick=r},t.Clock.prototype.dispose=function(){return this._jsNode.disconnect(),this.frequency.dispose(),this.frequency=null,this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._jsNode.onaudioprocess=t.noOp,this._jsNode=null,this.tick=null,this.onended=t.noOp,this},t.Clock}),Module(function(Tone){Tone.Transport=function(){this._clock=new Tone.Clock(0,this._processTick.bind(this)),this._clock.onended=this._onended.bind(this),this.loop=!1,this.bpm=new Tone.Signal(120,Tone.Type.BPM),this._bpmMult=new Tone.Multiply(1/60*tatum),this.state=Tone.State.Stopped,this.bpm.chain(this._bpmMult,this._clock.frequency)},Tone.extend(Tone.Transport),Tone.Transport.defaults={bpm:120,swing:0,swingSubdivision:"16n",timeSignature:4,loopStart:0,loopEnd:"4m"};var tatum=12,timelineTicks=0,transportTicks=0,swingSubdivision="16n",swingTatum=3,swingAmount=0,transportTimeSignature=4,loopStart=0,loopEnd=4*tatum,intervals=[],timeouts=[],transportTimeline=[],timelineProgress=0,SyncedSources=[],SyncedSignals=[];Tone.Transport.prototype._processTick=function(t){this.state===Tone.State.Started&&(swingAmount>0&&timelineTicks%tatum!==0&&timelineTicks%swingTatum===0&&(t+=this._ticksToSeconds(swingTatum)*swingAmount),processIntervals(t),processTimeouts(t),processTimeline(t),transportTicks+=1,timelineTicks+=1,this.loop&&timelineTicks===loopEnd&&this._setTicks(loopStart))},Tone.Transport.prototype._setTicks=function(t){timelineTicks=t;for(var e=0;e<transportTimeline.length;e++){var n=transportTimeline[e];if(n.callbackTick()>=t){timelineProgress=e;break}}};var processIntervals=function(t){for(var e=0,n=intervals.length;n>e;e++){var i=intervals[e];i.testInterval(transportTicks)&&i.doCallback(t)}},processTimeouts=function(t){for(var e=0,n=0,i=timeouts.length;i>n;n++){var r=timeouts[n],o=r.callbackTick();if(transportTicks>=o)r.doCallback(t),e++;else if(o>transportTicks)break}timeouts.splice(0,e)},processTimeline=function(t){for(var e=timelineProgress,n=transportTimeline.length;n>e;e++){var i=transportTimeline[e],r=i.callbackTick();if(r===timelineTicks)timelineProgress=e,i.doCallback(t);else if(r>timelineTicks)break}};Tone.Transport.prototype.setInterval=function(t,e,n){var i=this._toTicks(e),r=new TimelineEvent(t,n,i,transportTicks);return intervals.push(r),r.id},Tone.Transport.prototype.clearInterval=function(t){for(var e=0;e<intervals.length;e++){var n=intervals[e];if(n.id===t)return intervals.splice(e,1),!0}return!1},Tone.Transport.prototype.clearIntervals=function(){var t=intervals.length>0;return intervals=[],t},Tone.Transport.prototype.setTimeout=function(t,e,n){for(var i=this._toTicks(e),r=new TimelineEvent(t,n,i+transportTicks,0),o=0,s=timeouts.length;s>o;o++){var a=timeouts[o];if(a.callbackTick()>r.callbackTick())return timeouts.splice(o,0,r),r.id}return timeouts.push(r),r.id},Tone.Transport.prototype.clearTimeout=function(t){for(var e=0;e<timeouts.length;e++){var n=timeouts[e];if(n.id===t)return timeouts.splice(e,1),!0}return!1},Tone.Transport.prototype.clearTimeouts=function(){var t=timeouts.length>0;return timeouts=[],t},Tone.Transport.prototype.setTimeline=function(t,e,n){for(var i=this._toTicks(e),r=new TimelineEvent(t,n,i,0),o=timelineProgress,s=transportTimeline.length;s>o;o++){var a=transportTimeline[o];if(a.callbackTick()>r.callbackTick())return transportTimeline.splice(o,0,r),r.id}return transportTimeline.push(r),r.id},Tone.Transport.prototype.clearTimeline=function(t){for(var e=0;e<transportTimeline.length;e++){var n=transportTimeline[e];if(n.id===t)return transportTimeline.splice(e,1),!0}return!1},Tone.Transport.prototype.clearTimelines=function(){timelineProgress=0;var t=transportTimeline.length>0;return transportTimeline=[],t},Tone.Transport.prototype._toTicks=function(t){var e=this.toSeconds(t),n=this.notationToSeconds("4n"),i=e/n,r=i*tatum;return Math.round(r)},Tone.Transport.prototype._ticksToSeconds=function(t,e,n){t=Math.floor(t);var i=this.notationToSeconds("4n",e,n);return i*t/tatum},Tone.Transport.prototype.nextBeat=function(t){t=this.defaultArg(t,"4n");var e=this._toTicks(t),n=transportTicks%e,i=n;return n>0&&(i=e-n),this._ticksToSeconds(i)},Tone.Transport.prototype.start=function(t,e){if(this.state===Tone.State.Stopped||this.state===Tone.State.Paused){this.isUndef(e)||this._setTicks(this._toTicks(e)),this.state=Tone.State.Started;var n=this.toSeconds(t);this._clock.start(n);for(var i=0;i<SyncedSources.length;i++){var r=SyncedSources[i].source,o=SyncedSources[i].delay;r.start(n+o)}}return this},Tone.Transport.prototype.stop=function(t){if(this.state===Tone.State.Started||this.state===Tone.State.Paused){var e=this.toSeconds(t);this._clock.stop(e);for(var n=0;n<SyncedSources.length;n++){var i=SyncedSources[n].source;i.stop(e)}}else this._onended();return this},Tone.Transport.prototype._onended=function(){transportTicks=0,this._setTicks(0),this.clearTimeouts(),this.state=Tone.State.Stopped},Tone.Transport.prototype.pause=function(t){if(this.state===Tone.State.Started){this.state=Tone.State.Paused;var e=this.toSeconds(t);this._clock.stop(e);for(var n=0;n<SyncedSources.length;n++){var i=SyncedSources[n].source;i.pause(e)}}return this},Object.defineProperty(Tone.Transport.prototype,"timeSignature",{get:function(){return transportTimeSignature},set:function(t){transportTimeSignature=t}}),Object.defineProperty(Tone.Transport.prototype,"loopStart",{get:function(){return this._ticksToSeconds(loopStart)},set:function(t){loopStart=this._toTicks(t)}}),Object.defineProperty(Tone.Transport.prototype,"loopEnd",{get:function(){return this._ticksToSeconds(loopEnd)},set:function(t){loopEnd=this._toTicks(t)}}),Tone.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(Tone.Transport.prototype,"swing",{get:function(){return 2*swingAmount},set:function(t){swingAmount=.5*t}}),Object.defineProperty(Tone.Transport.prototype,"swingSubdivision",{get:function(){return swingSubdivision},set:function(t){swingSubdivision=t,swingTatum=this._toTicks(t)}}),Object.defineProperty(Tone.Transport.prototype,"position",{get:function(){var t=timelineTicks/tatum,e=Math.floor(t/transportTimeSignature),n=Math.floor(t%1*4);t=Math.floor(t)%transportTimeSignature;var i=[e,t,n];return i.join(":")},set:function(t){var e=this._toTicks(t);this._setTicks(e)}}),Tone.Transport.prototype.syncSource=function(t,e){return SyncedSources.push({source:t,delay:this.toSeconds(this.defaultArg(e,0))}),this},Tone.Transport.prototype.unsyncSource=function(t){for(var e=0;e<SyncedSources.length;e++)SyncedSources[e].source===t&&SyncedSources.splice(e,1);return this},Tone.Transport.prototype.syncSignal=function(t,e){e||(e=0!==t._value.value?t._value.value/this.bpm.value:0);var n=this.context.createGain();return n.gain.value=e,this.bpm.chain(n,t._value),SyncedSignals.push({ratio:n,signal:t,initial:t._value.value}),t._value.value=0,this},Tone.Transport.prototype.unsyncSignal=function(t){for(var e=0;e<SyncedSignals.length;e++){var n=SyncedSignals[e];n.signal===t&&(n.ratio.disconnect(),n.signal._value.value=n.initial,SyncedSignals.splice(e,1))}return this},Tone.Transport.prototype.dispose=function(){return this._clock.dispose(),this._clock=null,this.bpm.dispose(),this.bpm=null,this._bpmMult.dispose(),this._bpmMult=null,this};var TimelineEventIDCounter=0,TimelineEvent=function(t,e,n,i){this.startTicks=i,this.tickTime=n,this.callback=t,this.context=e,this.id=TimelineEventIDCounter++};TimelineEvent.prototype.doCallback=function(t){this.callback.call(this.context,t)},TimelineEvent.prototype.callbackTick=function(){return this.startTicks+this.tickTime},TimelineEvent.prototype.testInterval=function(t){return(t-this.startTicks)%this.tickTime===0},Tone.prototype.isNotation=function(){var t=new RegExp(/[0-9]+[mnt]$/i);return function(e){return t.test(e)}}(),Tone.prototype.isTransportTime=function(){var t=new RegExp(/^\d+(\.\d+)?:\d+(\.\d+)?(:\d+(\.\d+)?)?$/i);return function(e){return t.test(e)}}(),Tone.prototype.notationToSeconds=function(t,e,n){e=this.defaultArg(e,Tone.Transport.bpm.value),n=this.defaultArg(n,transportTimeSignature);var i=60/e,r=parseInt(t,10),o=0;0===r&&(o=0);var s=t.slice(-1);return o="t"===s?4/r*2/3:"n"===s?4/r:"m"===s?r*n:0,i*o},Tone.prototype.transportTimeToSeconds=function(t,e,n){e=this.defaultArg(e,Tone.Transport.bpm.value),n=this.defaultArg(n,transportTimeSignature);var i=0,r=0,o=0,s=t.split(":");2===s.length?(i=parseFloat(s[0]),r=parseFloat(s[1])):1===s.length?r=parseFloat(s[0]):3===s.length&&(i=parseFloat(s[0]),r=parseFloat(s[1]),o=parseFloat(s[2]));var a=i*n+r+o/4;return a*this.notationToSeconds("4n")},Tone.prototype.toTransportTime=function(t,e,n){var i=this.toSeconds(t,e,n);e=this.defaultArg(e,Tone.Transport.bpm.value),n=this.defaultArg(n,transportTimeSignature);var r=this.notationToSeconds("4n"),o=i/r,s=Math.floor(o/n),a=Math.floor(o%1*4);o=Math.floor(o)%n;var u=[s,o,a];return u.join(":")},Tone.prototype.toFrequency=function(t,e){return this.isFrequency(t)?parseFloat(t):this.isNotation(t)||this.isTransportTime(t)?this.secondsToFrequency(this.toSeconds(t,e)):t},Tone.prototype.toSeconds=function(time,now){if(now=this.defaultArg(now,this.now()),"number"==typeof time)return time;if("string"==typeof time){var plusTime=0;"+"===time.charAt(0)&&(plusTime=now,time=time.slice(1));var components=time.split(/[\(\)\-\+\/\*]/);if(components.length>1){for(var originalTime=time,i=0;i<components.length;i++){var symb=components[i].trim();if(""!==symb){var val=this.toSeconds(symb);time=time.replace(symb,val)}}try{time=eval(time)}catch(e){throw new EvalError("problem evaluating Tone.Type.Time: "+originalTime)}}else time=this.isNotation(time)?this.notationToSeconds(time):this.isTransportTime(time)?this.transportTimeToSeconds(time):this.isFrequency(time)?this.frequencyToSeconds(time):parseFloat(time);return time+plusTime}return now};var TransportConstructor=Tone.Transport;return Tone._initAudioContext(function(){if("function"==typeof Tone.Transport)Tone.Transport=new Tone.Transport;else{Tone.Transport.stop();var t=Tone.Transport.bpm.value;Tone.Transport._clock.dispose(),TransportConstructor.call(Tone.Transport),Tone.Transport.bpm.value=t}}),Tone.Transport}),Module(function(t){t.Master=function(){t.call(this),this._unmutedVolume=1,this._muted=!1,this.volume=new t.Signal(this.output.gain,t.Type.Decibels),this.input.chain(this.output,this.context.destination)},t.extend(t.Master),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._muted},set:function(t){!this._muted&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-(1/0)):this._muted&&!t&&(this.volume.value=this._unmutedVolume),this._muted=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.prototype.toMaster=function(){return this.connect(t.Master),this},AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this};var e=t.Master;return t._initAudioContext(function(){t.prototype.isUndef(t.Master)?(e.prototype.dispose.call(t.Master),e.call(t.Master)):t.Master=new e}),t.Master}),Module(function(t){return t.Source=function(e){t.call(this,0,1),e=this.defaultArg(e,t.Source.defaults),this.onended=e.onended,this._nextStart=1/0,this._nextStop=1/0,this.volume=new t.Signal({param:this.output.gain,value:e.volume,units:t.Type.Decibels}),this._readOnly("volume"),this._timeout=-1,this.output.channelCount=2,this.output.channelCountMode="explicit"},t.extend(t.Source),t.Source.defaults={onended:t.noOp,volume:0},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._stateAtTime(this.now())}}),t.Source.prototype._stateAtTime=function(e){return e=this.toSeconds(e),this._nextStart<=e&&this._nextStop>e?t.State.Started:this._nextStop<=e?t.State.Stopped:t.State.Stopped},t.Source.prototype.start=function(e){return e=this.toSeconds(e),(this._stateAtTime(e)!==t.State.Started||this.retrigger)&&(this._nextStart=e,this._nextStop=1/0,this._start.apply(this,arguments)),this},t.Source.prototype.stop=function(e){var n=this.now();if(e=this.toSeconds(e,n),this._stateAtTime(e)===t.State.Started){this._nextStop=this.toSeconds(e),clearTimeout(this._timeout);var i=e-n;i>0?this._timeout=setTimeout(this.onended,1e3*i+20):this.onended(),this._stop.apply(this,arguments)}return this},t.Source.prototype.pause=function(t){return this.stop(t),this},t.Source.prototype.sync=function(e){return t.Transport.syncSource(this,e),this},t.Source.prototype.unsync=function(){return t.Transport.unsyncSource(this),this},t.Source.prototype.dispose=function(){t.prototype.dispose.call(this),this.stop(),clearTimeout(this._timeout),this.onended=t.noOp,this._writable("volume"),this.volume.dispose(),this.volume=null},t.Source}),Module(function(t){return t.Oscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.Oscillator.defaults);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0},t.Oscillator.prototype._start=function(t){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(this.toSeconds(t))},t.Oscillator.prototype._stop=function(t){return this._oscillator&&(this._oscillator.stop(this.toSeconds(t)),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=t,n=4096,i=n/2,r=new Float32Array(i),o=new Float32Array(i),s=1,a=/(sine|triangle|square|sawtooth)(\d+)$/.exec(t);a&&(s=parseInt(a[2]),t=a[1],s=Math.max(s,2),i=s);for(var u=this._phase,l=1;i>l;++l){var c,h=2/(l*Math.PI);switch(t){case"sine":c=s>=l?1:0;break;case"square":c=1&l?2*h:0;break;case"sawtooth":c=h*(1&l?1:-1);break;case"triangle":c=1&l?2*h*h*(l-1>>1&1?-1:1):0;break;default:throw new TypeError("invalid oscillator type: "+t)}0!==c?(r[l]=-c*Math.sin(u*l),o[l]=c*Math.cos(u*l)):(r[l]=0,o[l]=0)}var p=this.context.createPeriodicWave(r,o);this._wave=p,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=e}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this},t.Oscillator}),Module(function(t){return t.AudioToGain=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),Module(function(t){return t.LFO=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.LFO.defaults);this.oscillator=new t.Oscillator({frequency:e.frequency,type:e.type,phase:e.phase+90}),this.frequency=this.oscillator.frequency,this.amplitude=this.oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.oscillator.chain(this._a2g,this._scaler),this._readOnly(["amplitude","frequency","oscillator"])},t.extend(t.LFO,t.Oscillator),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1},t.LFO.prototype.start=function(t){return this.oscillator.start(t),this},t.LFO.prototype.stop=function(t){return this.oscillator.stop(t),this},t.LFO.prototype.sync=function(t){return this.oscillator.sync(t),this.oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this.oscillator.unsync(),this.oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this.oscillator.type},set:function(t){this.oscillator.type=t}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this.oscillator.phase-90},set:function(t){this.oscillator.phase=t+90}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}}),t.LFO.prototype.connect=function(e){return e.constructor===t.Signal&&(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Signal.prototype._fromUnits,t.LFO.prototype._toUnits=t.Signal.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["amplitude","frequency","oscillator"]),this.oscillator.dispose(),this.oscillator=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),Module(function(t){return t.Limiter=function(e){this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter),t.Limiter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),Module(function(t){return t.LowpassCombFilter=function(){t.call(this);var e=this.optionsObject(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter.defaults);this._delay=this.input=this.context.createDelay(1),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._lowpass=this.output=this.context.createBiquadFilter(),
this._lowpass.Q.value=0,this._lowpass.type="lowpass",this.dampening=new t.Signal(this._lowpass.frequency,t.Type.Frequency),this.dampening.value=e.dampening,this._feedback=this.context.createGain(),this.resonance=new t.Signal(e.resonance,t.Type.NormalRange),this._delay.chain(this._lowpass,this._feedback,this._delay),this.delayTime.connect(this._delay.delayTime),this.resonance.connect(this._feedback.gain),this.dampening.connect(this._lowpass.frequency),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.disconnect(),this._delay=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this.delayTime.dispose(),this.delayTime=null,this},t.LowpassCombFilter}),Module(function(t){return t.Merge=function(){t.call(this,2,0),this.left=this.input[0]=this.context.createGain(),this.right=this.input[1]=this.context.createGain(),this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1)},t.extend(t.Merge),t.Merge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.left.disconnect(),this.left=null,this.right.disconnect(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),Module(function(t){return t.Meter=function(e,n,i){t.call(this),this._channels=this.defaultArg(e,1),this._smoothing=this.defaultArg(n,.8),this._clipMemory=1e3*this.defaultArg(i,.5),this._volume=new Array(this._channels),this._values=new Array(this._channels);for(var r=0;r<this._channels;r++)this._volume[r]=0,this._values[r]=0;this._lastClip=0,this._jsNode=this.context.createScriptProcessor(this.bufferSize,this._channels,1),this._jsNode.onaudioprocess=this._onprocess.bind(this),this._jsNode.noGC(),this.input.connect(this.output),this.input.connect(this._jsNode)},t.extend(t.Meter),t.Meter.prototype._onprocess=function(t){for(var e=this._jsNode.bufferSize,n=this._smoothing,i=0;i<this._channels;i++){for(var r,o=t.inputBuffer.getChannelData(i),s=0,a=0,u=!1,l=0;e>l;l++)r=o[l],!u&&r>.95&&(u=!0,this._lastClip=Date.now()),a+=r,s+=r*r;var c=a/e,h=Math.sqrt(s/e);this._volume[i]=Math.max(h,this._volume[i]*n),this._values[i]=c}},t.Meter.prototype.getLevel=function(t){t=this.defaultArg(t,0);var e=this._volume[t];return 1e-5>e?0:e},t.Meter.prototype.getValue=function(t){return t=this.defaultArg(t,0),this._values[t]},t.Meter.prototype.getDb=function(t){return this.gainToDb(this.getLevel(t))},t.Meter.prototype.isClipped=function(){return Date.now()-this._lastClip<this._clipMemory},t.Meter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._jsNode.disconnect(),this._jsNode.onaudioprocess=null,this._volume=null,this._values=null,this},t.Meter}),Module(function(t){return t.Split=function(){t.call(this,0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this.left=this.output[0]=this.context.createGain(),this.right=this.output[1]=this.context.createGain(),this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split),t.Split.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.disconnect(),this.left.disconnect(),this.right.disconnect(),this.left=null,this.right=null,this._splitter=null,this},t.Split}),Module(function(t){t.MidSideSplit=function(){t.call(this,0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),e.connect(this.mid,0,2),e.connect(this.side,0,2)},t.extend(t.MidSideSplit);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideSplit.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),Module(function(t){t.MidSideMerge=function(){t.call(this,2,0),this.mid=this.input[0]=this.context.createGain(),this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=this.context.createGain(),this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),e.connect(this._left,0,2),e.connect(this._right,0,2)},t.extend(t.MidSideMerge);var e=null;return t._initAudioContext(function(){e=new t.Signal(1/Math.sqrt(2))}),t.MidSideMerge.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.disconnect(),this.mid=null,this.side.disconnect(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),Module(function(t){return t.MidSideCompressor=function(e){e=this.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),Module(function(t){return t.Mono=function(){t.call(this,1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=this.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),Module(function(t){return t.MultibandCompressor=function(e){e=this.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=this.context.createGain(),this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),Module(function(t){return t.GainToAudio=function(){this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),Module(function(t){return t.Panner=function(e){t.call(this),this._hasStereoPanner=this.isFunction(this.context.createStereoPanner),this._hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=new t.Signal(0,t.Type.NormalRange),this._scalePan=new t.GainToAudio,this.pan.chain(this._scalePan,this._panner.pan)):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=this._crossFade.fade,this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=this.defaultArg(e,.5),this._readOnly("pan")},t.extend(t.Panner),t.Panner.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("pan"),this._hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan.dispose(),this.pan=null,this._scalePan.dispose(),this._scalePan=null):(this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan=null),this},t.Panner}),Module(function(t){return t.Volume=function(e){this.output=this.input=this.context.createGain(),this.volume=new t.Signal(this.output.gain,t.Type.Decibels),this.volume.value=this.defaultArg(e,0),this._readOnly("volume")},t.extend(t.Volume),t.Volume.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),Module(function(t){return t.PanVol=function(e,n){this._panner=this.input=new t.Panner(e),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(n),this.volume=this._volume.volume,this._panner.connect(this._volume),this._readOnly(["pan","volume"])},t.extend(t.PanVol),t.PanVol.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this._volume.dispose(),this._volume=null,this.pan=null,this.volume=null,this},t.PanVol}),Module(function(t){return t.ScaledEnvelope=function(){var e=this.optionsObject(arguments,["attack","decay","sustain","release"],t.Envelope.defaults);t.Envelope.call(this,e),e=this.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),Module(function(t){return t.Buffer=function(){var e=this.optionsObject(arguments,["url","onload"],t.Buffer.defaults);this._buffer=null,this._reversed=e.reverse,this.url=void 0,this.loaded=!1,this.onload=e.onload.bind(this,this),e.url instanceof AudioBuffer?(this._buffer.set(e.url),this.onload(this)):"string"==typeof e.url&&(this.url=e.url,t.Buffer._addToQueue(e.url,this))},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,onload:t.noOp,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this.loaded=!0,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,n){return this.url=e,this.onload=this.defaultArg(n,this.onload),t.Buffer._addToQueue(e,this),this},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),t.Buffer._removeFromQueue(this),this._buffer=null,this.onload=t.Buffer.defaults.onload,this},Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this._buffer.numberOfChannels;t++)Array.prototype.reverse.call(this._buffer.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Buffer._queue=[],t.Buffer._currentDownloads=[],t.Buffer._totalDownloads=0,t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS=6,t.Buffer._addToQueue=function(e,n){t.Buffer._queue.push({url:e,Buffer:n,progress:0,xhr:null}),this._totalDownloads++,t.Buffer._next()},t.Buffer._removeFromQueue=function(e){var n;for(n=0;n<t.Buffer._queue.length;n++){var i=t.Buffer._queue[n];i.Buffer===e&&t.Buffer._queue.splice(n,1)}for(n=0;n<t.Buffer._currentDownloads.length;n++){var r=t.Buffer._currentDownloads[n];r.Buffer===e&&(t.Buffer._currentDownloads.splice(n,1),r.xhr.abort(),r.xhr.onprogress=null,r.xhr.onload=null,r.xhr.onerror=null)}},t.Buffer._next=function(){if(t.Buffer._queue.length>0){if(t.Buffer._currentDownloads.length<t.Buffer.MAX_SIMULTANEOUS_DOWNLOADS){var e=t.Buffer._queue.shift();t.Buffer._currentDownloads.push(e),e.xhr=t.Buffer.load(e.url,function(n){var i=t.Buffer._currentDownloads.indexOf(e);t.Buffer._currentDownloads.splice(i,1),e.Buffer.set(n),e.Buffer._reversed&&e.Buffer._reverse(),e.Buffer.onload(e.Buffer),t.Buffer._onprogress(),t.Buffer._next()}),e.xhr.onprogress=function(n){e.progress=n.loaded/n.total,t.Buffer._onprogress()},e.xhr.onerror=t.Buffer.onerror}}else 0===t.Buffer._currentDownloads.length&&(t.Buffer.onload(),t.Buffer._totalDownloads=0)},t.Buffer._onprogress=function(){var e=0,n=t.Buffer._currentDownloads.length,i=0;if(n>0){for(var r=0;n>r;r++){var o=t.Buffer._currentDownloads[r];e+=o.progress}i=e}var s=n-i,a=t.Buffer._totalDownloads-t.Buffer._queue.length-s;t.Buffer.onprogress(a/t.Buffer._totalDownloads)},t.Buffer.load=function(e,n){var i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){t.context.decodeAudioData(i.response,function(t){if(!t)throw new Error("could not decode audio data:"+e);n(t)})},i.send(),i},t.Buffer.onload=t.noOp,t.Buffer.onprogress=t.noOp,t.Buffer.onerror=t.noOp,t.Buffer}),Module(function(t){var e={};return t.prototype.send=function(t,n){e.hasOwnProperty(t)||(e[t]=this.context.createGain());var i=this.context.createGain();return i.gain.value=this.dbToGain(this.defaultArg(n,1)),this.output.chain(i,e[t]),i},t.prototype.receive=function(t,n){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),this.isUndef(n)&&(n=this.input),e[t].connect(n),this},t}),Module(function(t){function e(t,e,i){if(n.hasOwnProperty(t))for(var r=n[t],o=0,s=r.length;s>o;o++){var a=r[o];Array.isArray(i)?a.apply(window,[e].concat(i)):a(e,i)}}t.Note=function(e,n,i){this.value=i,this._channel=e,this._timelineID=t.Transport.setTimeline(this._trigger.bind(this),n)},t.Note.prototype._trigger=function(t){e(this._channel,t,this.value)},t.Note.prototype.dispose=function(){return t.Tranport.clearTimeline(this._timelineID),this.value=null,this};var n={};t.Note.route=function(t,e){n.hasOwnProperty(t)?n[t].push(e):n[t]=[e]},t.Note.unroute=function(t,e){if(n.hasOwnProperty(t)){var i=n[t],r=i.indexOf(e);-1!==r&&n[t].splice(r,1)}},t.Note.parseScore=function(e){var n=[];for(var i in e){var r=e[i];if("tempo"===i)t.Transport.bpm.value=r;else if("timeSignature"===i)t.Transport.timeSignature=r[0]/(r[1]/4);else{if(!Array.isArray(r))throw new TypeError("score parts must be Arrays");for(var o=0;o<r.length;o++){var s,a=r[o];if(Array.isArray(a)){var u=a[0],l=a.slice(1);s=new t.Note(i,u,l)}else s=new t.Note(i,a);n.push(s)}}}return n};var i={c:0,"c#":1,db:1,d:2,"d#":3,eb:3,e:4,f:5,"f#":6,gb:6,g:7,"g#":8,ab:8,a:9,"a#":10,bb:10,b:11},r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=261.6255653005986;return t.prototype.noteToFrequency=function(t){var e=t.split(/(\d+)/);if(3===e.length){var n=i[e[0].toLowerCase()],r=e[1],s=n+12*parseInt(r,10);return Math.pow(2,(s-48)/12)*o}return 0},t.prototype.isNote=function(){var t=new RegExp(/[a-g]{1}([b#]{1}|[b#]{0})[0-9]+$/i);return function(e){return"string"==typeof e&&(e=e.toLowerCase()),t.test(e)}}(),t.prototype._overwrittenToFrequency=t.prototype.toFrequency,t.prototype.toFrequency=function(t,e){return this.isNote(t)&&(t=this.noteToFrequency(t)),this._overwrittenToFrequency(t,e)},t.prototype.frequencyToNote=function(t){var e=Math.log(t/o)/Math.LN2,n=Math.round(12*e)+48,i=Math.floor(n/12),s=r[n%12];return s+i.toString()},t.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},t.prototype.midiToNote=function(t){var e=Math.floor(t/12)-2,n=t%12;return r[n]+e},t.prototype.noteToMidi=function(t){var e=t.split(/(\d+)/);if(3===e.length){var n=i[e[0].toLowerCase()],r=e[1];return n+12*(parseInt(r,10)+2)}return 0},t.Note}),Module(function(t){return t.PulseOscillator=function(){var e=this.optionsObject(arguments,["frequency","width"],t.Oscillator.defaults);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=this.context.createGain(),this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return 0>t?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Oscillator),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.disconnect(),this._widthGate=null,this._widthGate=null,this._thresh.disconnect(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),Module(function(t){return t.PWMOscillator=function(){var e=this.optionsObject(arguments,["frequency","modulationFrequency"],t.PWMOscillator.defaults);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune}),this._scale=new t.Multiply(1.01),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Oscillator),t.PWMOscillator.defaults={frequency:440,detune:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),Module(function(t){t.OmniOscillator=function(){var e=this.optionsObject(arguments,["frequency","type"],t.OmniOscillator.defaults);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"])},t.extend(t.OmniOscillator,t.Oscillator),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",width:.4,modulationFrequency:.4};var e={PulseOscillator:"PulseOscillator",PWMOscillator:"PWMOscillator",Oscillator:"Oscillator"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){return this._oscillator.type},set:function(n){if(0===n.indexOf("sine")||0===n.indexOf("square")||0===n.indexOf("triangle")||0===n.indexOf("sawtooth"))this._sourceType!==e.Oscillator&&(this._sourceType=e.Oscillator,this._createNewOscillator(t.Oscillator)),this._oscillator.type=n;else if("pwm"===n)this._sourceType!==e.PWMOscillator&&(this._sourceType=e.PWMOscillator,this._createNewOscillator(t.PWMOscillator));else{if("pulse"!==n)throw new TypeError("Tone.OmniOscillator does not support type "+n);this._sourceType!==e.PulseOscillator&&(this._sourceType=e.PulseOscillator,this._createNewOscillator(t.PulseOscillator))}}}),t.OmniOscillator.prototype._createNewOscillator=function(e){var n=this.now()+this.bufferTime;if(null!==this._oscillator){var i=this._oscillator;i.stop(n),i.onended=function(){i.dispose(),i=null}}this._oscillator=new e,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(n)},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){return this._sourceType===e.PulseOscillator?this._oscillator.width:void 0}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){return this._sourceType===e.PWMOscillator?this._oscillator.modulationFrequency:void 0}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),Module(function(t){return t.Instrument=function(e){e=this.defaultArg(e,t.Instrument.defaults),this.output=this.context.createGain(),this.volume=new t.Signal({param:this.output.gain,units:t.Type.Decibels,value:e.volume}),this._readOnly(["volume"])},t.extend(t.Instrument),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,n,i){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(t,n,i),this.triggerRelease(n+e),this},t.Instrument.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable(["volume"]),this.volume.dispose(),this.volume=null,this},t.Instrument}),Module(function(t){return t.Monophonic=function(e){e=this.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,n){return e=this.toSeconds(e),this._triggerEnvelopeAttack(e,n),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var n=this.frequency.value;this.frequency.setValueAtTime(n,e);var i=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+i)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),Module(function(t){return t.MonoSynth=function(e){e=this.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.ScaledEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,min:20,max:4e3,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),Module(function(t){return t.AMSynth=function(e){e=this.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this.carrier=new t.MonoSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.MonoSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.modulator.chain(this._modulationScale,this._modulationNode.gain),this.carrier.chain(this._modulationNode,this.output),this._readOnly(["carrier","modulator","frequency","harmonicity"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,carrier:{volume:-10,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,min:2e4,max:2e4},filter:{Q:6,type:"lowpass",rolloff:-24}},modulator:{volume:-10,oscillator:{type:"square"},envelope:{attack:2,decay:0,sustain:1,release:.5},filterEnvelope:{attack:4,decay:.2,sustain:.5,release:.5,min:20,max:1500},filter:{Q:6,type:"lowpass",rolloff:-24}}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this.carrier.filterEnvelope.triggerAttack(t),this.modulator.filterEnvelope.triggerAttack(t),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.AMSynth}),Module(function(t){return t.DrumSynth=function(e){e=this.defaultArg(e,t.DrumSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.Oscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.DrumSynth,t.Instrument),t.DrumSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.DrumSynth.prototype.triggerAttack=function(t,e,n){e=this.toSeconds(e),t=this.toFrequency(t);var i=t*this.octaves;return this.oscillator.frequency.setValueAtTime(i,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,n),this},t.DrumSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.DrumSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.DrumSynth}),Module(function(t){return t.DuoSynth=function(e){e=this.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=this.context.createGain(),this.vibratoAmount=new t.Signal(this._vibratoGain.gain,t.Type.Gain),this.vibratoAmount.value=e.vibratoAmount,this._vibratoDelay=this.toSeconds(e.vibratoDelay),this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,vibratoDelay:1,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibrato.dispose(),this._vibrato=null,this._vibratoGain.disconnect(),this._vibratoGain=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),Module(function(t){return t.FMSynth=function(e){e=this.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this.carrier=new t.MonoSynth(e.carrier),
this.carrier.volume.value=-10,this.modulator=new t.MonoSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.modulator.connect(this._modulationNode.gain),this._modulationNode.gain.value=0,this._modulationNode.connect(this.carrier.frequency),this.carrier.connect(this.output),this._readOnly(["carrier","modulator","frequency","harmonicity","modulationIndex"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:0,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,min:2e4,max:2e4}},modulator:{volume:-10,portamento:0,oscillator:{type:"triangle"},envelope:{attack:.01,decay:0,sustain:1,release:.5},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5,min:2e4,max:2e4}}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this.carrier.filterEnvelope.triggerAttack(t),this.modulator.filterEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity","modulationIndex"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.FMSynth}),Module(function(t){t.Noise=function(){var e=this.optionsObject(arguments,["type"],t.Noise.defaults);t.Source.call(this,e),this._source=null,this._buffer=null,this.type=e.type},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white"},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._buffer===i?"white":this._buffer===n?"brown":this._buffer===e?"pink":void 0},set:function(r){if(this.type!==r){switch(r){case"white":this._buffer=i;break;case"pink":this._buffer=e;break;case"brown":this._buffer=n;break;default:this._buffer=i}if(this.state===t.State.Started){var o=this.now()+this.bufferTime;this._source.onended=void 0,this._stop(o),this._start(o)}}}}),t.Noise.prototype._start=function(t){this._source=this.context.createBufferSource(),this._source.buffer=this._buffer,this._source.loop=!0,this.connectSeries(this._source,this.output),this._source.start(this.toSeconds(t)),this._source.onended=this.onended},t.Noise.prototype._stop=function(t){this._source&&this._source.stop(this.toSeconds(t))},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var e=null,n=null,i=null;return t._initAudioContext(function(t){var r=t.sampleRate,o=4*r;e=function(){for(var e=t.createBuffer(2,o,r),n=0;n<e.numberOfChannels;n++){var i,s,a,u,l,c,h,p=e.getChannelData(n);i=s=a=u=l=c=h=0;for(var f=0;o>f;f++){var d=2*Math.random()-1;i=.99886*i+.0555179*d,s=.99332*s+.0750759*d,a=.969*a+.153852*d,u=.8665*u+.3104856*d,l=.55*l+.5329522*d,c=-.7616*c-.016898*d,p[f]=i+s+a+u+l+c+h+.5362*d,p[f]*=.11,h=.115926*d}}return e}(),n=function(){for(var e=t.createBuffer(2,o,r),n=0;n<e.numberOfChannels;n++)for(var i=e.getChannelData(n),s=0,a=0;o>a;a++){var u=2*Math.random()-1;i[a]=(s+.02*u)/1.02,s=i[a],i[a]*=3.5}return e}(),i=function(){for(var e=t.createBuffer(2,o,r),n=0;n<e.numberOfChannels;n++)for(var i=e.getChannelData(n),s=0;o>s;s++)i[s]=2*Math.random()-1;return e}()}),t.Noise}),Module(function(t){return t.NoiseSynth=function(e){e=this.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.ScaledEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.filter,this.envelope,this.output),this.noise.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["noise","filter","filterEnvelope","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},filter:{Q:6,type:"highpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:0},filterEnvelope:{attack:.06,decay:.2,sustain:0,release:2,min:20,max:4e3,exponent:2}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","filter","filterEnvelope","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this},t.NoiseSynth}),Module(function(t){return t.PluckSynth=function(e){e=this.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=1,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var n=1/t;return this._lfcf.delayTime.setValueAtTime(n,e),this._noise.start(e),this._noise.stop(e+n*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),Module(function(t){return t.PolySynth=function(){t.Instrument.call(this);var e=this.optionsObject(arguments,["polyphony","voice"],t.PolySynth.defaults);this.voices=new Array(e.polyphony),this._freeVoices=[],this._activeVoices={};for(var n=0;n<e.polyphony;n++){var i=new e.voice(arguments[2],arguments[3]);this.voices[n]=i,i.connect(this.output)}this._freeVoices=this.voices.slice(0)},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,voice:t.MonoSynth},t.PolySynth.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i],o=JSON.stringify(r);if(this._activeVoices[o])this._activeVoices[o].triggerAttack(r,e,n);else if(this._freeVoices.length>0){var s=this._freeVoices.shift();s.triggerAttack(r,e,n),this._activeVoices[o]=s}}return this},t.PolySynth.prototype.triggerAttackRelease=function(t,e,n,i){return n=this.toSeconds(n),this.triggerAttack(t,n,i),this.triggerRelease(t,n+this.toSeconds(e)),this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=JSON.stringify(t[n]),r=this._activeVoices[i];r&&(r.triggerRelease(e),this._freeVoices.push(r),delete this._activeVoices[i],r=null)}return this},t.PolySynth.prototype.set=function(t,e,n){for(var i=0;i<this.voices.length;i++)this.voices[i].set(t,e,n);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.setPreset=function(t){for(var e=0;e<this.voices.length;e++)this.voices[e].setPreset(t);return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this.voices=null,this._activeVoices=null,this._freeVoices=null,this},t.PolySynth}),Module(function(t){return t.Player=function(){var e=this.optionsObject(arguments,["url","onload"],t.Player.defaults);t.Source.call(this,e),this._source=null,this.autostart=e.autostart,this._buffer=new t.Buffer({url:e.url,onload:this._onload.bind(this,e.onload),reverse:e.reverse}),this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.retrigger=e.retrigger},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e)),this},t.Player.prototype._onload=function(t){t(this),this.autostart&&this.start()},t.Player.prototype._start=function(t,e,n){if(!this._buffer.loaded)throw Error("tried to start Player before the buffer was loaded");return e=this._loop?this.defaultArg(e,this._loopStart):this.defaultArg(e,0),e=this.toSeconds(e),n=this.defaultArg(n,this._buffer.duration-e),t=this.toSeconds(t),n=this.toSeconds(n),this._source=this.context.createBufferSource(),this._source.buffer=this._buffer.get(),this._loop?(this._source.loop=this._loop,this._source.loopStart=this.toSeconds(this._loopStart),this._source.loopEnd=this.toSeconds(this._loopEnd),n=65536):this._nextStop=t+n,this._source.playbackRate.value=this._playbackRate,this._source.onended=this.onended,this._source.connect(this.output),this._source.start(t,e,n),this},t.Player.prototype._stop=function(t){return this._source&&(this._source.stop(this.toSeconds(t)),this._source=null),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),Module(function(t){return t.Sampler=function(e,n){n=this.defaultArg(n,t.Sampler.defaults),t.Instrument.call(this,n),this.player=new t.Player(n.player),this.player.retrigger=!0,this._buffers={},this.envelope=new t.AmplitudeEnvelope(n.envelope),this.filterEnvelope=new t.ScaledEnvelope(n.filterEnvelope),this._sample=n.sample,this._pitch=n.pitch,this.filter=new t.Filter(n.filter),this._loadBuffers(e),this.pitch=n.pitch,this.player.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["player","filterEnvelope","envelope","filter"])},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={sample:0,pitch:0,player:{loop:!1},envelope:{attack:.001,decay:0,sustain:1,release:.1},filterEnvelope:{attack:.001,decay:.001,sustain:1,release:.5,min:20,max:2e4,exponent:2},filter:{type:"lowpass"}},t.Sampler.prototype._loadBuffers=function(e){if("string"==typeof e)this._buffers[0]=new t.Buffer(e,function(){this.sample="0"}.bind(this));else{e=this._flattenUrls(e);for(var n in e){this._sample=n;var i=e[n];this._buffers[n]=new t.Buffer(i)}}},t.Sampler.prototype._flattenUrls=function(t){var e={};for(var n in t)if(t.hasOwnProperty(n))if("object"==typeof t[n]){var i=this._flattenUrls(t[n]);for(var r in i)i.hasOwnProperty(r)&&(e[n+"."+r]=i[r])}else e[n]=t[n];return e},t.Sampler.prototype.triggerAttack=function(t,e,n){return e=this.toSeconds(e),t&&(this.sample=t),this.player.start(e),this.envelope.triggerAttack(e,n),this.filterEnvelope.triggerAttack(e),this},t.Sampler.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.filterEnvelope.triggerRelease(t),this.envelope.triggerRelease(t),this.player.stop(this.toSeconds(this.envelope.release)+t),this},Object.defineProperty(t.Sampler.prototype,"sample",{get:function(){return this._sample},set:function(t){if(!this._buffers.hasOwnProperty(t))throw new Error("Sampler does not have a sample named "+t);this._sample=t,this.player.buffer=this._buffers[t]}}),Object.defineProperty(t.Sampler.prototype,"reverse",{get:function(){for(var t in this._buffers)return this._buffers[t].reverse},set:function(t){for(var e in this._buffers)this._buffers[e].reverse=t}}),Object.defineProperty(t.Sampler.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t,this.player.playbackRate=this.intervalToFrequencyRatio(t)}}),t.Sampler.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this),this._writable(["player","filterEnvelope","envelope","filter"]),this.player.dispose(),this.filterEnvelope.dispose(),this.envelope.dispose(),this.filter.dispose(),this.player=null,this.filterEnvelope=null,this.envelope=null,this.filter=null;for(var e in this._buffers)this._buffers[e].dispose(),this._buffers[e]=null;return this._buffers=null,this},t.Sampler}),Module(function(t){return t.SimpleSynth=function(e){e=this.defaultArg(e,t.SimpleSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.SimpleSynth,t.Monophonic),t.SimpleSynth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.SimpleSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.SimpleSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.SimpleSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.SimpleSynth}),Module(function(t){return t.SimpleAM=function(e){e=this.defaultArg(e,t.SimpleAM.defaults),t.Monophonic.call(this,e),this.carrier=new t.SimpleSynth(e.carrier),this.modulator=new t.SimpleSynth(e.modulator),this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.modulator.chain(this._modulationScale,this._modulationNode.gain),this.carrier.chain(this._modulationNode,this.output),this._readOnly(["carrier","modulator","frequency","harmonicity"])},t.extend(t.SimpleAM,t.Monophonic),t.SimpleAM.defaults={harmonicity:3,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5}},modulator:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.5,decay:.1,sustain:1,release:.5}}},t.SimpleAM.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this},t.SimpleAM.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.SimpleAM.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.SimpleAM}),Module(function(t){return t.SimpleFM=function(e){e=this.defaultArg(e,t.SimpleFM.defaults),t.Monophonic.call(this,e),this.carrier=new t.SimpleSynth(e.carrier),this.carrier.volume.value=-10,this.modulator=new t.SimpleSynth(e.modulator),this.modulator.volume.value=-10,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=this.context.createGain(),this.frequency.connect(this.carrier.frequency),this.frequency.chain(this.harmonicity,this.modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.modulator.connect(this._modulationNode.gain),this._modulationNode.gain.value=0,this._modulationNode.connect(this.carrier.frequency),this.carrier.connect(this.output),this._readOnly(["carrier","modulator","frequency","harmonicity","modulationIndex"])},t.extend(t.SimpleFM,t.Monophonic),t.SimpleFM.defaults={harmonicity:3,modulationIndex:10,carrier:{volume:-10,portamento:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:0,sustain:1,release:.5}},modulator:{volume:-10,portamento:0,oscillator:{type:"triangle"},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.SimpleFM.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.carrier.envelope.triggerAttack(t,e),this.modulator.envelope.triggerAttack(t),this},t.SimpleFM.prototype._triggerEnvelopeRelease=function(t){return this.carrier.triggerRelease(t),this.modulator.triggerRelease(t),this},t.SimpleFM.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["carrier","modulator","frequency","harmonicity","modulationIndex"]),this.carrier.dispose(),this.carrier=null,this.modulator.dispose(),this.modulator=null,this.frequency.dispose(),this.frequency=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.disconnect(),this._modulationNode=null,this},t.SimpleFM}),Module(function(t){return t.Effect=function(){t.call(this);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=this.context.createGain(),this.effectReturn=this.context.createGain(),this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.disconnect(),this.effectSend=null,this.effectReturn.disconnect(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),Module(function(t){return t.AutoFilter=function(){var e=this.optionsObject(arguments,["frequency","min","max"],t.AutoFilter.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:e.min,max:e.max}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"])},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,min:200,max:1200,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"min",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=t}}),Object.defineProperty(t.AutoFilter.prototype,"max",{get:function(){return this._lfo.max},set:function(t){this._lfo.max=t}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),Module(function(t){return t.AutoPanner=function(){var e=this.optionsObject(arguments,["frequency"],t.AutoPanner.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:0,max:1,phase:90}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),Module(function(t){return t.AutoWah=function(){var e=this.optionsObject(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah.defaults);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=this.context.createGain(),this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return this.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/this.dbToGain(t)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.disconnect(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),Module(function(t){return t.BitCrusher=function(){var e=this.optionsObject(arguments,["bits"],t.BitCrusher.defaults);t.Effect.call(this,e);var n=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(n),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),Module(function(t){return t.Chebyshev=function(){var e=this.optionsObject(arguments,["order"],t.Chebyshev.defaults);t.Effect.call(this),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,n){return n.hasOwnProperty(e)?n[e]:(0===e?n[e]=0:1===e?n[e]=t:n[e]=2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n),n[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),n=e.length,i=0;n>i;++i){var r=2*i/n-1;0===r?e[i]=0:e[i]=this._getCoefficient(r,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),Module(function(t){return t.StereoEffect=function(){t.call(this);var e=this.optionsObject(arguments,["wet"],t.Effect.defaults);this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),Module(function(t){return t.FeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"]);e=this.defaultArg(e,t.FeedbackEffect.defaults),t.Effect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackGain=this.context.createGain(),this.effectReturn.chain(this._feedbackGain,this.effectSend),this.feedback.connect(this._feedbackGain.gain),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackGain.disconnect(),this._feedbackGain=null,this},t.FeedbackEffect}),Module(function(t){return t.StereoXFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=this.context.createGain(),this._feedbackRL=this.context.createGain(),this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.FeedbackEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.disconnect(),this._feedbackLR=null,this._feedbackRL.disconnect(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),Module(function(t){return t.Chorus=function(){var e=this.optionsObject(arguments,["frequency","delayTime","depth"],t.Chorus.defaults);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO(e.rate,0,1),this._lfoR=new t.LFO(e.rate,0,1),this._lfoR.phase=180,this._delayNodeL=this.context.createDelay(),this._delayNodeR=this.context.createDelay(),this.frequency=this._lfoL.frequency,this.connectSeries(this.effectSendL,this._delayNodeL,this.effectReturnL),this.connectSeries(this.effectSendR,this._delayNodeR,this.effectReturnR),this.input.connect(this.output),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"])},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine"},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.disconnect(),this._delayNodeL=null,this._delayNodeR.disconnect(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),Module(function(t){return t.Convolver=function(){var e=this.optionsObject(arguments,["url"],t.Convolver.defaults);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer(e.url,function(t){this.buffer=t,e.onload()}.bind(this)),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={url:"",onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this)),this},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),
this._buffer=null,this},t.Convolver}),Module(function(t){return t.Distortion=function(){var e=this.optionsObject(arguments,["distortion"],t.Distortion.defaults);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,n=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),Module(function(t){return t.FeedbackDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.FeedbackDelay.defaults);t.FeedbackEffect.call(this,e),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this._delayNode=this.context.createDelay(4),this.connectEffect(this._delayNode),this.delayTime.connect(this._delayNode.delayTime),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this.delayTime.dispose(),this._delayNode.disconnect(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),Module(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],n=[225,556,441,341];return t.Freeverb=function(){var i=this.optionsObject(arguments,["roomSize","dampening"],t.Freeverb.defaults);t.StereoEffect.call(this,i),this.roomSize=new t.Signal(i.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(i.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var r=0;r<n.length;r++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=n[r],this._allpassFiltersL.push(o)}for(var s=0;s<n.length;s++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=n[s],this._allpassFiltersR.push(a)}for(var u=0;u<e.length;u++){var l=new t.LowpassCombFilter(e[u]);u<e.length/2?this.effectSendL.chain(l,this._allpassFiltersL[0]):this.effectSendR.chain(l,this._allpassFiltersR[0]),this.roomSize.connect(l.resonance),this.dampening.connect(l.dampening),this._combFilters.push(l)}this.connectSeries.apply(this,this._allpassFiltersL),this.connectSeries.apply(this,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var n=0;n<this._allpassFiltersR.length;n++)this._allpassFiltersR[n].disconnect(),this._allpassFiltersR[n]=null;this._allpassFiltersR=null;for(var i=0;i<this._combFilters.length;i++)this._combFilters[i].dispose(),this._combFilters[i]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),Module(function(t){var e=[.06748,.06404,.08212,.09004],n=[.773,.802,.753,.733],i=[347,113,37];return t.JCReverb=function(){var r=this.optionsObject(arguments,["roomSize"],t.JCReverb.defaults);t.StereoEffect.call(this,r),this.roomSize=new t.Signal(r.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<i.length;o++){var s=this.context.createBiquadFilter();s.type="allpass",s.frequency.value=i[o],this._allpassFilters.push(s)}for(var a=0;a<e.length;a++){var u=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(u.resonance),u.resonance.value=n[a],this._allpassFilters[this._allpassFilters.length-1].connect(u),a<e.length/2?u.connect(this.effectReturnL):u.connect(this.effectReturnR),this._feedbackCombFilters.push(u)}this.roomSize.connect(this._scaleRoomSize),this.connectSeries.apply(this,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var n=0;n<this._feedbackCombFilters.length;n++)this._feedbackCombFilters[n].dispose(),this._feedbackCombFilters[n]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),Module(function(t){return t.MidSideEffect=function(){t.Effect.call(this),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),Module(function(t){return t.Phaser=function(){var e=this.optionsObject(arguments,["frequency","depth","baseFrequency"],t.Phaser.defaults);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._depth=e.depth,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.depth=e.depth,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,depth:10,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(t,e,n){for(var i=new Array(t),r=0;t>r;r++){var o=this.context.createBiquadFilter();o.type="allpass",n.connect(o.Q),e.connect(o.frequency),i[r]=o}return this.connectSeries.apply(this,i),i},Object.defineProperty(t.Phaser.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._baseFrequency+this._baseFrequency*t;this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.depth=this._depth}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var n=0;n<this._filtersR.length;n++)this._filtersR[n].disconnect(),this._filtersR[n]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),Module(function(t){return t.PingPongDelay=function(){var e=this.optionsObject(arguments,["delayTime","feedback"],t.PingPongDelay.defaults);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=this.context.createDelay(e.maxDelayTime),this._rightDelay=this.context.createDelay(e.maxDelayTime),this._rightPreDelay=this.context.createDelay(e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.disconnect(),this._leftDelay=null,this._rightDelay.disconnect(),this._rightDelay=null,this._rightPreDelay.disconnect(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),Module(function(t){return t.StereoFeedbackEffect=function(){var e=this.optionsObject(arguments,["feedback"],t.FeedbackEffect.defaults);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=this.context.createGain(),this._feedbackR=this.context.createGain(),this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.FeedbackEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.disconnect(),this._feedbackL=null,this._feedbackR.disconnect(),this._feedbackR=null,this},t.StereoFeedbackEffect}),Module(function(t){return t.StereoWidener=function(){var e=this.optionsObject(arguments,["width"],t.StereoWidener.defaults);t.MidSideEffect.call(this,e),this.width=new t.Signal(.5,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),Module(function(t){return t.Tremolo=function(){var e=this.optionsObject(arguments,["frequency","depth"],t.Tremolo.defaults);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:1,max:0}),this._amplitude=this.context.createGain(),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this._readOnly(["frequency","depth"]),this.connectEffect(this._amplitude),this._lfo.connect(this._amplitude.gain),this.type=e.type},t.extend(t.Tremolo,t.Effect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5},t.Tremolo.prototype.start=function(t){return this._lfo.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfo.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfo.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Tremolo.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfo.dispose(),this._lfo=null,this._amplitude.disconnect(),this._amplitude=null,this.frequency=null,this.depth=null,this},t.Tremolo}),Module(function(t){return t.Clip=function(e,n){if(e>n){var i=e;e=n,n=i}this.min=this.input=new t.Min(n),this._readOnly("min"),this.max=this.output=new t.Max(e),this._readOnly("max"),this.min.connect(this.max)},t.extend(t.Clip,t.SignalBase),t.Clip.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("min"),this.min.dispose(),this.min=null,this._writable("max"),this.max.dispose(),this.max=null,this},t.Clip}),Module(function(t){return t.Normalize=function(e,n){this._inputMin=this.defaultArg(e,0),this._inputMax=this.defaultArg(n,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),Module(function(t){t.Route=function(n){n=this.defaultArg(n,2),t.call(this,1,n),this.gate=new t.Signal(0),this._readOnly("gate");for(var i=0;n>i;i++){var r=new e(i);this.output[i]=r,this.gate.connect(r.selecter),this.input.connect(r)}},t.extend(t.Route,t.SignalBase),t.Route.prototype.select=function(t,e){return t=Math.floor(t),this.gate.setValueAtTime(t,this.toSeconds(e)),this},t.Route.prototype.dispose=function(){this._writable("gate"),this.gate.dispose(),this.gate=null;for(var e=0;e<this.output.length;e++)this.output[e].dispose(),this.output[e]=null;return t.prototype.dispose.call(this),this};var e=function(e){this.selecter=new t.Equal(e),this.gate=this.input=this.output=this.context.createGain(),this.selecter.connect(this.gate.gain)};return t.extend(e),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.selecter.dispose(),this.selecter=null,this.gate.disconnect(),this.gate=null},t.Route}),Module(function(t){return t.Switch=function(e){e=this.defaultArg(e,!1),t.call(this),this.gate=new t.Signal(0),this._readOnly("gate"),this._thresh=new t.GreaterThan(.5),this.input.connect(this.output),this.gate.chain(this._thresh,this.output.gain),e&&this.open()},t.extend(t.Switch,t.SignalBase),t.Switch.prototype.open=function(t){return this.gate.setValueAtTime(1,this.toSeconds(t)),this},t.Switch.prototype.close=function(t){return this.gate.setValueAtTime(0,this.toSeconds(t)),this},t.Switch.prototype.dispose=function(){return t.prototype.dispose.call(this),this._writable("gate"),this.gate.dispose(),this.gate=null,this._thresh.dispose(),this._thresh=null,this},t.Switch}),Module(function(t){return t.Microphone=function(e){t.Source.call(this),this._mediaStream=null,this._stream=null,this._constraints={audio:!0};var n=this;MediaStreamTrack.getSources(function(t){e<t.length&&(n.constraints.audio={optional:[{sourceId:t[e].id}]})})},t.extend(t.Microphone,t.Source),t.Microphone.prototype._start=function(){navigator.getUserMedia(this._constraints,this._onStream.bind(this),this._onStreamError.bind(this))},t.Microphone.prototype._stop=function(){return this._stream.stop(),this},t.Microphone.prototype._onStream=function(t){this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)},t.Microphone.prototype._onStreamError=function(t){console.error(t)},t.Microphone.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._mediaStream&&(this._mediaStream.disconnect(),this._mediaStream=null),this._stream=null,this._constraints=null,this},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t.Microphone}),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return Tone}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=["wrap","bounce"];e.seqWrapTypes=r;var o=["walk","random"];e.seqModes=o;var s=["linear","rect","tall"];e.seqViews=s;var a=i.getScaleNames().sort();e.scaleNames=a;var u=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];e.scaleRoots=u},function(t,e,n){"use strict";function i(){for(var t=arguments.length<=0||void 0===arguments[0]?16:arguments[0],e="";e.length<t;)e+=r.sample([o,s][e.length%2]);return e}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o="zxcbnmsdfghjklqwrtp",s="aeiou";e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(14),s=n(6),a=n(1),u=function(){function t(e,n,r,o){i(this,t),this.id=s(16),this.fromSeqId=e,this.fromStep=n,this.toSeqId=r,this.toStep=o,this.active=!0,this.cond=!0,this.action="",this.param="",this.prob=100}return r(t,[{key:"run",value:function(t){var e=t.seqs;if(this.active){var n=o[this.action];if(n){var i=e[this.fromSeqId],r=e[this.toSeqId];if(i&&r&&i.position==this.fromStep){var s=i.steps[this.fromStep];if(!(this.cond&&s.value<.05||100*Math.random()>=this.prob)){var a=r.steps[this.toStep];n.call(this,{fromSeq:i,fromStep:s,toSeq:r,toStep:a})}}}}}}]),t}(),l=a(o).map(function(t,e){return a.isFunction(t)?e:null}).compact().sort().value();u.actions=["noop"].concat(l),e["default"]=u,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(6),s=n(11),a=(n(5),function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?16:arguments[0];i(this,t),this.id=o(16),this.ui=!0,this.name=o(8),this.run=!0,this.speed=1,this._move=0,this._trigger=!1,this.position=0,this.direction=1,this.stride=1,this.wrap="wrap",this.mode="walk",this.view="linear",this.routes=[],this.scaleName="major",this.scaleRoot="C",this.scaleOctave=4,this.scaleWidth=9,this.scale=null,this.nSteps=e,this.steps=null,this.initializeSteps(),this.refreshScale()}return r(t,[{key:"initializeSteps",value:function(){for(this.steps||(this.steps=[]);this.steps.length>this.nSteps;)this.steps.pop();for(;this.steps.length<this.nSteps;)this.steps.push({value:0})}},{key:"setNSteps",value:function(t){1>t&&(t=1),this.nSteps=t,this.initializeSteps()}},{key:"refreshScale",value:function(){this.scale=s.makeScale(this.scaleName,this.scaleRoot+this.scaleOctave,this.scaleWidth)}},{key:"tick",value:function(t){if(this.run){var e=this.steps[this.position];if(this._trigger&&e&&e.value){this._trigger=!1;var n=this.scale.inHertz,i=e.value,r=n[(0|Math.round(i*n.length))%n.length];_.invoke(this.routes,"run",t,{value:i,noteHz:r})}if(this._move++,!(this._move<this.speed)){this._move=0;var o=this.position,s=o;switch(this.mode){case"random":s=0|Math.random()*this.steps.length;break;default:s+=this.direction*this.stride}this._trigger=s!=o,this.position=s,(this.position<0||this.position>=this.steps.length)&&this.handleWrap()}}}},{key:"handleWrap",value:function(){var t=this.position<0,e=this.position>=this.steps.length;switch(this.wrap){case"bounce":e?(this.direction=-1,this.position=this.steps.length-1):(this.direction=1,this.position=0);break;default:t&&(this.position+=this.steps.length),e&&(this.position-=this.steps.length)}}},{key:"reset",value:function(){this._move=0,this.position=0,this.direction=1}},{key:"randomize",value:function(){this.steps.forEach(function(t){t.value=Math.random()})}},{key:"clear",value:function(){this.steps.forEach(function(t){t.value=0})}},{key:"shift",value:function(){for(var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=this.steps,i=0;t>i;i++)e?n.push(n.shift()):n.unshift(n.pop())}}]),t}());e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=(n(1),n(6)),s=n(4),a=n(15),u=function(){function t(){i(this,t),this.id=o(16),this.name=o(8),this.active=!0,this.dests=["note","volume","cutoffMin","cutoffMax","resonance","attack","release","detune"],this.synth=new s.MonoSynth,this.synth.connect(a.master),this.trigger("cutoffMin",{value:5e4}),this.trigger("cutoffMax",{value:5e4})}return r(t,[{key:"trigger",value:function(t,e){if(this.active&&this.synth)switch(t){case"note":e.value>.05&&this.synth.triggerAttackRelease(e.noteHz,.1);break;case"cutoffMin":null!==e.value&&(this.synth.filterEnvelope.min=e.value);break;case"cutoffMax":null!==e.value&&(this.synth.filterEnvelope.max=e.value);break;case"resonance":null!==e.value&&(this.synth.filter.Q.value=e.value);break;case"attack":null!==e.value&&(this.synth.envelope.attack=e.value);break;case"release":null!==e.value&&(this.synth.envelope.release=e.value);break;case"detune":null!==e.value&&(this.synth.detune.value=e.value)}}},{key:"dispose",value:function(){this.synth&&this.synth.dispose&&this.synth.dispose(),this.synth&&(this.synth=null)}}]),t}();e["default"]=u,t.exports=e["default"]},function(t,e,n){var i;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function r(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(n){var i=typeof n;if("string"===i||"number"===i)t+=" "+n;else if(Array.isArray(n))t+=" "+r.apply(null,n);else if("object"===i)for(var o in n)n.hasOwnProperty(o)&&n[o]&&(t+=" "+o)}}return t.substr(1)}"undefined"!=typeof t&&t.exports?t.exports=r:(i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i)))}()},function(t,e){t.exports=function(){"use strict";function t(t,e){return Math.pow(t,1/e)}function e(t){var e=/^[A-G][b#]?[0-8]$/;return"string"==typeof t&&e.test(t)}function n(t){return m.hasOwnProperty(t)}function i(t){var e=/^[A-Za-z\-\_ ]+$/;return"string"==typeof t&&e.test(t)}function r(t){return Array.isArray(t)&&t.every(o)}function o(t){return"number"==typeof t&&t%1===0&&t>0}function s(t,e){var n=t*Math.pow(d,e);return n=n>v?v:n,n=_>n?_:n,Math.round(100*n)/100}function a(t){return t*g}function u(t,e){var n=12,i=4,r={C:-9,D:-7,E:-5,F:-4,G:-2,A:0,B:2};return r[t]+(e-i)*n}function l(t){var e={"#":1,b:-1};return"#"!==t&&"b"!==t?0:e[t]}function c(){var t,e=[];for(t in m)m.hasOwnProperty(t)&&e.push(t);return e}function h(t){if(!e(t))throw new Error('Invalid argument noteString: getNote(noteString) noteString should be a valid note name, eg. "Ab0", "C7"');var n,i,r=t.match(/^[A-G]/g),o=t.match(/[b#]/g),a=t.match(/[0-8]/g),c=r?r[0]:null,h=o?o[0]:null,p=a?parseInt(a[0],10):null;return n=u(c,p),i=n+l(h),s(y.A4,i)}function p(t,r,u){if(arguments.length<3)throw new Error("Missing argument(s): makeScale() expects three arguments");if(!i(t))throw new Error("Invalid argument scaleType: makeScale(scaleType, startNote, noteCount) expects scaleType to be a string consisting of lower or upper case letters (A-Z, a-z), spaces, hyphens(-) or underscores(_) only");if(!n(t))throw new Error("Scale type is undefined: makeScale(scaleType, startNote, noteCount) scale with name provided for scaleType is not defined – make sure you choose from available scale types");if(!o(u))throw new Error("Invalid argument noteCount: makeScale(scaleType, startNote, noteCount) expects noteCount to be a positive integer greater than 0");if(!e(r))throw new Error('Invalid argument startNote: makeScale(scaleType, startNote, noteCount) startNote should be a valid note name, eg. "Ab0", "C7"');var l,c=m[t],p=[],f=[],d=[],y=0,_=0,v=h(r);for(p.push(v),f.push(0),d.push(0),l=0;u-1>l;l+=1)y+=c[_],p.push(s(v,y)),f.push(a(y)),d.push(y),_=_===c.length-1?0:_+1;return{startNote:v,inHertz:p,inCents:f,inSemiTones:d}}function f(t,e){if(arguments.length<2)throw new Error("Missing argument(s): addScale() expects two arguments");if(!i(t))throw new Error("Invalid argument name: addScale(name, scaleDef) expects name to be a string consisting of lower or upper case letters (A-Z, a-z), spaces, hyphens(-) or underscores(_) only");if(n(t))throw new Error("Scale type already defined: addScale(name, scaleDef) scale with value of name argument is already defined – make sure you choose a scale name not already in use");if(!r(e))throw new Error("Invalid argument scaleDef: addScale(name, scaleDef) expects scaleDef to be an array of only positive integers greater than 0");m[t]=e}var d=t(2,12),y={A4:440,C0:16.35,B8:7902.13},_=y.C0,v=y.B8,g=100,m={};return m.chromatic=[1],m.wholeTone=[2],m.major=[2,2,1,2,2,2,1],m.majorPentatonic=[2,2,3,2,3],m.minorPentatonic=[3,2,2,3,2],m.kuomiPentatonic=[1,4,2,1,4],m.chinesePentatonic=[4,2,1,4,1],m.naturalMinor=[2,1,2,2,1,2,2],m.harmonicMinor=[2,1,2,2,1,3,1],m.melodicMinor=[2,1,2,2,2,2,1],{makeScale:p,getNote:h,addScale:f,getScaleNames:c,test:{getIntervalFromA4:u,getIntervalAdjustment:l,getCentsByInterval:a,getNoteByInterval:s,isValidNoteName:e,isValidScaleName:i,isValidScaleDefinition:r,isPositiveIntegerGreaterThanZero:o,isScaleTypeDefined:n}}}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=n(6),a=function(){function t(){i(this,t),this.id=s(16),this.active=!0,this.synthId=null,this.destName=null,this.minValue=0,this.maxValue=1}return r(t,[{key:"run",value:function(t,e){if(this.active){var n=t.synths[this.synthId];n&&(e=o.extend({},e,{original:e.value,value:this.minValue+e.value*(this.maxValue-this.minValue)}),e.value=parseFloat(e.value),o.isNaN(e.value)&&(e.value=null),n.trigger(this.destName,e))}}}]),t}();e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e){a[t]=e}function r(t,e,n){n.forEach(function(n){i(t+" "+n,function(t){t.toSeq[e]=n})}),i(t+" ???",function(t){t.toSeq[e]=o.sample(n)})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),s=n(5),a={};i("reset",function(t){t.toSeq.reset()}),i("step on",function(t){t.toStep.value=1}),i("step off",function(t){t.toStep.value=0}),i("step toggle",function(t){t.toStep.value=1-t.toStep.value}),i("step random",function(t){t.toStep.value=Math.random()}),i("direction forward",function(t){t.toSeq.direction=1}),i("direction backward",function(t){t.toSeq.direction=-1}),i("direction toggle",function(t){t.toSeq.direction*=-1}),i("pos random",function(t){t.toSeq.position=0|Math.random()*t.toSeq.nSteps}),i("seq random",function(t){t.toSeq.randomize()}),i("seq clear",function(t){t.toSeq.clear()}),i("seq shift",function(t){t.toSeq.shift()}),r("wrap","wrap",s.seqWrapTypes),r("mode","mode",s.seqModes),e["default"]=a,t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=new i.FeedbackDelay("6n",.25);e.masterDelay=r,r.toMaster();var o=r;e.master=o},function(t,e,n){"use strict";function i(){var t=o.mount(document.body,a);t.seqs=u,t.actions=l,t.synths=c,r.Transport.setInterval(function(){var t={seqs:{},synths:{}};u.forEach(function(e){t.seqs[e.id]=e}),c.forEach(function(e){t.synths[e.id]=e}),s.invoke(u,"tick",t),s.invoke(l,"run",t),o.redraw()},"16n"),r.Transport.start()}Object.defineProperty(e,"__esModule",{value:!0}),e.ignition=i;var r=window.Tone=n(4),o=n(2),s=n(1),a=n(18),u=(n(9),[]),l=[],c=[]},function(t,e,n){"use strict";function i(t,e){var n=t.seqMap[e.fromSeqId],i=t.seqMap[e.toSeqId];return r("div.action",{key:e.id},[r("div",[r("input",{type:"checkbox",checked:!!e.active,onclick:function(){e.active=!e.active}}),r("span",[n.name,"/",e.fromStep," => ",i.name,"/",e.toStep].join("")),r("button",{onclick:function(){t.delAction(e)}},"del")]),r("div",[r("label",[r("input",{type:"checkbox",checked:!!e.cond,onclick:function(){e.cond=!e.cond}}),"cond."]),r("label",["prob:",r("input",{type:"range",min:0,max:100,value:e.prob,oninput:function(t){e.prob=0|t.target.value}})])]),a({value:e.action,onchange:function(t){e.action=t.target.value}},o.actions)])}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(7),s=n(3),a=s.select;e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),e.dispose&&e.dispose()),t}Object.defineProperty(e,"__esModule",{value:!0}),n(27);var r=n(4),o=n(2),s=n(1),a=n(8),u=n(9),l=n(21),c=n(17),h=n(23),p={controller:function(){var t=this;this.seqs=[],this.actions=[],this.synths=[],this.seqMap={},this.stepActionMap={},this.routeDests=[],this.addAction=function(e){t.actions.push(e),t.updateMaps()},this.delAction=function(e){i(t.actions,e),t.updateMaps()},this.addSeq=function(e){t.seqs.push(e),t.updateMaps()},this.delSeq=function(e){i(t.seqs,e),t.updateMaps()},this.delRoute=function(t,e){i(t.routes,e)},this.addSynth=function(e){t.synths.push(e),t.updateMaps()},this.delSynth=function(e){i(t.synths,e),t.updateMaps()},this.updateMaps=function(){t.seqMap=s.reduce(t.seqs,function(t,e){return t[e.id]=e,t},{}),t.stepActionMap=s.reduce(t.actions,function(t,e){return e.active&&(t.rx[e.toSeqId+"-"+e.toStep]=!0,t.tx[e.fromSeqId+"-"+e.fromStep]=!0),t},{rx:{},tx:{}});var e=[];t.synths.forEach(function(t){t.dests.forEach(function(n){e.push([t.id+"/"+n,t.name+"/"+n])})}),t.routeDests=e},this.updateMaps()},view:function(t){return o("div#ui",[o("div#seqs",[o("div.toolbar",[o("input",{type:"number",min:10,max:600,value:r.Transport.bpm.value,oninput:function(t){r.Transport.bpm.value=0|t.target.value}}),o("button",{onclick:function(){t.addSeq(new a(16))}},"+seq"),o("button",{onclick:function(){s.invoke(t.seqs,"reset")}},"reset all"),o("button",{onclick:function(){t.seqs.forEach(function(t){t.ui=!1})}},"collapse all")]),o("div#seqlist",t.seqs.map(s.partial(l,t)))]),o("div#actions",t.actions.map(s.partial(c,t))),o("div#synths",[o("div.toolbar",[o("button",{onclick:function(){t.addSynth(new u)}},"+synth")]),o("div#synthlist",t.synths.map(s.partial(h,t)))])])}};e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e,n){return s("span",[s("input",{type:"number",value:n.minValue,oninput:function(t){n.minValue=t.target.valueAsNumber}}),s("input",{type:"number",value:n.maxValue,oninput:function(t){n.maxValue=t.target.valueAsNumber}})])}function r(t,e,n){var r=e.id+"-"+n.id,a={key:r},c=n.synthId?n.synthId+"/"+n.destName:"",h=t.routeDests;return""===c&&(h=[["","--select--"]].concat(h)),s("div.route",a,[s("input",{type:"checkbox",checked:n.active,onclick:function(t){n.active=!!t.target.checked}}),u({value:c,onchange:function(t){var e=t.target.value.split("/",2),i=o(e,2),r=i[0],s=i[1];n.synthId=r,n.destName=s}},h),c?"note"==n.destName?l(t,e):i(t,e,n):null,s("button",{onclick:function(i){t.delRoute(e,n)}},"del")])}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=(n(10),n(2)),a=(n(1),n(3)),u=a.select,l=n(20);e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e){return r("span",[s({value:e.scaleName,oninput:function(t){e.scaleName=t.target.value,e.refreshScale()}},a.scaleNames),s({value:e.scaleRoot,oninput:function(t){e.scaleRoot=t.target.value,e.refreshScale()}},a.scaleRoots),r("input",{type:"number",value:e.scaleOctave,min:-5,max:16,oninput:function(t){e.scaleOctave=0|t.target.value,e.refreshScale()}}),r("input",{type:"number",value:e.scaleWidth,min:2,max:64,oninput:function(t){e.scaleWidth=0|t.target.value,e.refreshScale()}})])}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(3),s=o.select,a=n(5);e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function i(t){var e=0|Math.sqrt(t.length),n=[];return t.forEach(function(t,i){n.push(t),i%e==e-1&&n.push(o("div"))}),n}function r(t,e){var n=[o("div",[o("input",{title:"ui",type:"checkbox",checked:!!e.ui,onclick:function(){e.ui=!e.ui}}),o("span",[e.name," ",e.position+1,"/",e.nSteps].join(""))])];if(e.ui){var r=e.steps.map(s.partial(l,t,e));"rect"==e.view&&(r=i(r));var a=e.routes.map(s.partial(c,t,e));n=n.concat([o("div.toolbar",[o("button",{onclick:function(){e.reset()}},"reset"),o("button",{onclick:function(){e.randomize()}},"rand"),o("button",{onclick:function(){e.clear()}},"clr"),o("button",{onclick:function(t){e.routes.push(new h)}},"+route"),o("button",{onclick:function(n){n.ctrlKey&&t.delSeq(e)},title:"hold ctrl for safety"},"del")]),o("div",[o("input",{title:"steps",type:"number",value:e.nSteps,min:1,max:1024,oninput:function(t){e.setNSteps(t.target.value)}}),o("input",{title:"speed divisor",type:"number",value:e.speed,min:1,max:1024,oninput:function(t){e.speed=t.target.value}}),o("input",{title:"stride",type:"number",value:e.stride,min:0,max:1024,oninput:function(t){e.stride=t.target.value}}),u({title:"mode",value:e.mode,oninput:function(t){e.mode=t.target.value}},p.seqModes),u({title:"wrap type",value:e.wrap,oninput:function(t){e.wrap=t.target.value}},p.seqWrapTypes),u({title:"view type",value:e.view,oninput:function(t){e.view=t.target.value}},p.seqViews),o("input",{title:"forward",type:"checkbox",checked:e.direction>0,onclick:function(){e.direction=-e.direction}})]),o("div.routes",a),o("div.steps",r)])}return o("div.seq",{key:e.id},n)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(1),a=(n(8),n(3)),u=a.select,l=n(22),c=n(19),h=n(13),p=n(5);e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e,n,i){var a=e.id+"-"+i,l={key:a,ondragover:function(t){t.dataTransfer.getData("seq")&&t.preventDefault()},ondrop:function(n){var r;if(r=n.dataTransfer.getData("seq")){var o=JSON.parse(r),a=new s(o.seqId,o.step,e.id,i);t.addAction(a)}},className:r({tall:"tall"==e.view,current:i==e.position,div:i%4==0,rx:!!t.stepActionMap.rx[a],tx:!!t.stepActionMap.tx[a]}),oncontextmenu:function(){return!1},onmousedown:function(t){if(t.currentTarget==t.target){if(2==t.button)return n.value=n.value>.05?0:1,t.preventDefault(),void(n.manip=!1);n.manip=!0,t.target.onmousemove(t)}},onmouseup:function(){n.manip=!1},onmouseleave:function(){n.manip=!1},onmousemove:function(t){n.manip&&("tall"==e.view?n.value=1-t.offsetY/t.target.offsetHeight:n.value=t.offsetX/t.target.offsetWidth)}},c=n.value>.01?u[Math.min(100,Math.round(100*n.value))]:null;return c&&(l.style="background-image:"+c),o("div.step",l,[o("div.handle",{title:"link handle (drag to another step)",draggable:!0,ondragstart:function(t){t.dataTransfer.setData("seq",JSON.stringify({seqId:e.id,step:i}))}})])}Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),o=n(2),s=n(7),a=n(1),u=a.range(0,101).map(function(t){t=100-t;var e=t+1;return"linear-gradient(transparent "+t+"%, #dbff51 "+e+"%, #dbff51 100%)"});e["default"]=i,t.exports=e["default"]},function(t,e,n){"use strict";function i(t,e,n){return o("label",[t,o("input",{step:.01,type:"number",value:_.get(e,n),oninput:function(t){_.set(e,n,t.target.valueAsNumber)}})])}function r(t,e){return o("div",[o("div",[e.name,o("button",{onclick:function(n){n.ctrlKey&&t.delSynth(e)},title:"hold ctrl for safety"},"del")]),a({value:e.synth.oscillator.type,onchange:function(t){e.synth.oscillator.type=t.target.value}},["sine","square","triangle","sawtooth","pulse"]),a({value:e.synth.filter.type,onchange:function(t){e.synth.filter.type=t.target.value}},["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"]),o("div",[i("attack",e,"synth.envelope.attack"),i("release",e,"synth.envelope.release"),i("filterAttack",e,"synth.filterEnvelope.attack"),i("filterRelease",e,"synth.filterEnvelope.release"),i("cutoffMin",e,"synth.filterEnvelope.min"),i("cutoffMax",e,"synth.filterEnvelope.max"),i("detune",e,"synth.detune.value")])])}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),s=n(3),a=s.select;e["default"]=r,t.exports=e["default"]},function(t,e,n){e=t.exports=n(25)(),e.push([t.id,"*{box-sizing:border-box;font:14pt consolas,monaco,monospace;user-select:none}body{background:#333;color:#fff;margin:0}#ui{display:flex;flex-direction:row}#actions,#seqs,#synths{flex:1}#seqs{flex:2}button,input,select{background:transparent;color:inherit;border:1px solid #888;margin:4px}option{background:#aaa;color:#000}.step{display:inline-block;position:relative;width:2pc;height:2pc;border:3px solid #888;background:#000;margin:2px;cursor:pointer}.step.tall{height:8pc}.step.div{background:#411}.step:hover{border-color:#aaa}.step.current{border-color:#dbff51!important}.step.lit{background:#dbff51}.step.tx{border-top-color:red!important}.step.rx{border-bottom-color:red!important}.handle{background:#fff;opacity:.2;position:relative;left:-6px;top:-6px;width:9pt;height:9pt;cursor:move}.handle:hover{opacity:1}label{display:block}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=h[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(a(i.parts[o],e))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(a(i.parts[o],e));h[i.id]={id:i.id,refs:1,parts:s}}}}function r(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=r[0],s=r[1],a=r[2],u=r[3],l={css:s,media:a,sourceMap:u};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function o(){var t=document.createElement("style"),e=d();return t.type="text/css",e.appendChild(t),t}function s(){var t=document.createElement("link"),e=d();return t.rel="stylesheet",e.appendChild(t),t}function a(t,e){var n,i,r;if(e.singleton){var a=_++;n=y||(y=o()),i=u.bind(null,n,a,!1),r=u.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(),i=c.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=o(),i=l.bind(null,n),r=function(){n.parentNode.removeChild(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function u(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=v(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function l(t,e){var n=e.css,i=e.media;e.sourceMap;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function c(t,e){var n=e.css,i=(e.media,e.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var h={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},f=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=p(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,_=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=f());var n=r(t);return i(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=h[a.id];u.refs--,o.push(u)}if(t){var l=r(t);i(l,e)}for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var i=n(24);"string"==typeof i&&(i=[[t.id,i,""]]);n(26)(i,{});i.locals&&(t.exports=i.locals)}]);